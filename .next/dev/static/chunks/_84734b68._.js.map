{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/components/NewsFeed.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\ninterface NewsFeedProps {\r\n  asset?: string;\r\n  topic?: string;\r\n  region?: string;\r\n  date?: string;\r\n}\r\n\r\ninterface NewsItem {\r\n  title: string;\r\n  link: string;\r\n  pubDate?: string;\r\n  source?: string;\r\n}\r\n\r\nexport default function NewsFeed({ asset, topic, region }: NewsFeedProps) {\r\n  const [news, setNews] = useState<NewsItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n\r\n    async function load() {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(\r\n          `/api/news?asset=${asset || \"\"}&topic=${topic || \"\"}&region=${region || \"\"}`\r\n        );\r\n        const data = await res.json();\r\n        if (active) setNews(data.items || []);\r\n      } catch (err) {\r\n        console.error(\"‚ùå News fetch failed\", err);\r\n        if (active) setNews([]);\r\n      } finally {\r\n        if (active) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n    const timer = setInterval(load, 10 * 60 * 1000); // auto-refresh every 10 minutes\r\n\r\n    return () => {\r\n      active = false;\r\n      clearInterval(timer);\r\n    };\r\n  }, [asset, topic, region]);\r\n\r\n  if (loading)\r\n    return <div className=\"text-sm text-slate-500\">Loading news...</div>;\r\n\r\n  if (!news.length)\r\n    return <div className=\"text-sm text-slate-500\">No recent articles found.</div>;\r\n\r\n  return (\r\n    <div className=\"space-y-3 animate-fadeIn\">\r\n      {news.map((item, i) => (\r\n        <a\r\n          key={i}\r\n          href={item.link}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"block border rounded-md p-3 hover:bg-slate-50 transition\"\r\n        >\r\n          <div className=\"text-sm font-medium text-slate-900\">{item.title}</div>\r\n          <div className=\"text-[11px] text-slate-500 mt-0.5\">\r\n            {item.source && <span>{item.source}</span>}{\" \"}\r\n            {item.pubDate && (\r\n              <span>‚Ä¢ {new Date(item.pubDate).toLocaleDateString()}</span>\r\n            )}\r\n          </div>\r\n        </a>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAkBe,SAAS,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAiB;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;8BAAC;YACR,IAAI,SAAS;YAEb,eAAe;gBACb,WAAW;gBACX,IAAI;oBACF,MAAM,MAAM,MAAM,MAChB,CAAC,gBAAgB,EAAE,SAAS,GAAG,OAAO,EAAE,SAAS,GAAG,QAAQ,EAAE,UAAU,IAAI;oBAE9E,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,IAAI,QAAQ,QAAQ,KAAK,KAAK,IAAI,EAAE;gBACtC,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,uBAAuB;oBACrC,IAAI,QAAQ,QAAQ,EAAE;gBACxB,SAAU;oBACR,IAAI,QAAQ,WAAW;gBACzB;YACF;YAEA;YACA,MAAM,QAAQ,YAAY,MAAM,KAAK,KAAK,OAAO,gCAAgC;YAEjF;sCAAO;oBACL,SAAS;oBACT,cAAc;gBAChB;;QACF;6BAAG;QAAC;QAAO;QAAO;KAAO;IAEzB,IAAI,SACF,qBAAO,6LAAC;QAAI,WAAU;kBAAyB;;;;;;IAEjD,IAAI,CAAC,KAAK,MAAM,EACd,qBAAO,6LAAC;QAAI,WAAU;kBAAyB;;;;;;IAEjD,qBACE,6LAAC;QAAI,WAAU;kBACZ,KAAK,GAAG,CAAC,CAAC,MAAM,kBACf,6LAAC;gBAEC,MAAM,KAAK,IAAI;gBACf,QAAO;gBACP,KAAI;gBACJ,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;kCAAsC,KAAK,KAAK;;;;;;kCAC/D,6LAAC;wBAAI,WAAU;;4BACZ,KAAK,MAAM,kBAAI,6LAAC;0CAAM,KAAK,MAAM;;;;;;4BAAU;4BAC3C,KAAK,OAAO,kBACX,6LAAC;;oCAAK;oCAAG,IAAI,KAAK,KAAK,OAAO,EAAE,kBAAkB;;;;;;;;;;;;;;eAVjD;;;;;;;;;;AAiBf;GA3DwB;KAAA","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/components/CrashWatch.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\ninterface Country {\r\n  id: number;\r\n  name: string;\r\n  risk_score: number;\r\n  headline: string;\r\n}\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\nconst supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\nexport default function CrashWatch() {\r\n  const [countries, setCountries] = useState<Country[]>([]);\r\n  const [prevCountries, setPrevCountries] = useState<Record<number, number>>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [fade, setFade] = useState(false);\r\n  const [heartbeatSpeed, setHeartbeatSpeed] = useState(3);\r\n  const [utcTime, setUtcTime] = useState<string>(\"\");\r\n  const [lastUpdated, setLastUpdated] = useState<string>(\"\");\r\n  const [flashColor, setFlashColor] = useState<string>(\"\");\r\n\r\n  const prevAvgRisk = useRef<number>(0);\r\n  const audioCtx = useRef<AudioContext | null>(null);\r\n\r\n  // === smooth harmonic tone ===\r\n  function playAlertSound(type: \"warning\" | \"stable\" = \"warning\") {\r\n    if (!audioCtx.current)\r\n      audioCtx.current = new (window.AudioContext ||\r\n        (window as any).webkitAudioContext)();\r\n\r\n    const ctx = audioCtx.current;\r\n    const osc1 = ctx.createOscillator();\r\n    const osc2 = ctx.createOscillator();\r\n    const gain = ctx.createGain();\r\n\r\n    osc1.connect(gain);\r\n    osc2.connect(gain);\r\n    gain.connect(ctx.destination);\r\n\r\n    if (type === \"warning\") {\r\n      osc1.frequency.value = 440;\r\n      osc2.frequency.value = 660;\r\n    } else {\r\n      osc1.frequency.value = 240;\r\n      osc2.frequency.value = 360;\r\n    }\r\n\r\n    const start = ctx.currentTime;\r\n    gain.gain.setValueAtTime(0.0001, start);\r\n    gain.gain.exponentialRampToValueAtTime(0.25, start + 0.25);\r\n    gain.gain.exponentialRampToValueAtTime(0.001, start + 1.8);\r\n\r\n    osc1.start();\r\n    osc2.start();\r\n    osc1.stop(start + 2);\r\n    osc2.stop(start + 2);\r\n  }\r\n\r\n  // === Supabase fetch ===\r\n  async function fetchCountries() {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"countries\")\r\n        .select(\"*\")\r\n        .order(\"risk_score\", { ascending: false });\r\n      if (error) throw error;\r\n\r\n      const map: Record<number, number> = {};\r\n      data?.forEach((c) => (map[c.id] = c.risk_score));\r\n      setPrevCountries((prev) => ({ ...prev, ...map }));\r\n      setCountries(data || []);\r\n\r\n      setLastUpdated(new Date().toLocaleTimeString());\r\n      setFade(true);\r\n      setTimeout(() => setFade(false), 400);\r\n    } catch (err) {\r\n      console.error(\"‚ùå Error loading countries\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchCountries();\r\n    const interval = setInterval(fetchCountries, 60_000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // === global average ===\r\n  const avgRisk = useMemo(() => {\r\n    if (!countries.length) return 0;\r\n    return (\r\n      countries.reduce((sum, c) => sum + (c.risk_score || 0), 0) /\r\n      countries.length\r\n    );\r\n  }, [countries]);\r\n\r\n  // === global alert trigger ===\r\n  useEffect(() => {\r\n    if (!countries.length) return;\r\n\r\n    if (prevAvgRisk.current < 80 && avgRisk >= 80) {\r\n      playAlertSound(\"warning\");\r\n      setFlashColor(\"red\");\r\n      setTimeout(() => setFlashColor(\"\"), 1800);\r\n    } else if (prevAvgRisk.current >= 80 && avgRisk < 80) {\r\n      playAlertSound(\"stable\");\r\n      setFlashColor(\"blue\");\r\n      setTimeout(() => setFlashColor(\"\"), 1800);\r\n    }\r\n\r\n    prevAvgRisk.current = avgRisk;\r\n  }, [avgRisk, countries]);\r\n\r\n  // === heartbeat / UTC clock ===\r\n  useEffect(() => {\r\n    const update = () => {\r\n      const hour = new Date().getUTCHours();\r\n      setHeartbeatSpeed(hour >= 0 && hour < 7 ? 2 : hour < 14 ? 2.5 : hour < 21 ? 2 : 4);\r\n      setUtcTime(new Date().toUTCString().split(\" \")[4]);\r\n    };\r\n    update();\r\n    const i1 = setInterval(update, 1000);\r\n    return () => clearInterval(i1);\r\n  }, []);\r\n\r\n  // === color logic ===\r\n  const shimmerColor =\r\n    avgRisk >= 80\r\n      ? \"from-red-500 via-rose-500 to-red-400\"\r\n      : avgRisk >= 50\r\n      ? \"from-amber-400 via-yellow-400 to-amber-300\"\r\n      : \"from-blue-400 via-sky-500 to-blue-400\";\r\n\r\n  const shimmerLabel =\r\n    avgRisk >= 80\r\n      ? \"‚ö†Ô∏è Global Stress High\"\r\n      : avgRisk >= 50\r\n      ? \"üü° Moderate Risk\"\r\n      : \"üü¶ Stable Conditions\";\r\n\r\n  const clockGlow =\r\n    avgRisk >= 80\r\n      ? \"text-red-600\"\r\n      : avgRisk >= 50\r\n      ? \"text-amber-500\"\r\n      : \"text-blue-500\";\r\n\r\n  const flashClass =\r\n    flashColor === \"red\"\r\n      ? \"animate-flashRed\"\r\n      : flashColor === \"blue\"\r\n      ? \"animate-flashBlue\"\r\n      : \"\";\r\n\r\n  return (\r\n    <div\r\n      className={`bg-white border rounded-lg shadow-sm h-full flex flex-col transition-all relative overflow-hidden ${flashClass}`}\r\n    >\r\n      {/* Flash overlay */}\r\n      {flashColor && (\r\n        <div\r\n          className={`absolute top-0 left-0 right-0 h-1 ${\r\n            flashColor === \"red\" ? \"bg-red-500\" : \"bg-blue-500\"\r\n          }`}\r\n        ></div>\r\n      )}\r\n\r\n      {/* Header */}\r\n      <div className=\"p-4 flex items-center justify-between mb-1\">\r\n        <h2 className=\"text-sm font-semibold uppercase tracking-wide text-slate-600\">\r\n          Crash Watch\r\n        </h2>\r\n        <div\r\n          className={`w-3 h-3 rounded-full bg-gradient-to-r ${shimmerColor}`}\r\n          style={{\r\n            animation: `heartbeat ${heartbeatSpeed}s ease-in-out infinite`,\r\n          }}\r\n        ></div>\r\n      </div>\r\n\r\n      {/* UTC Clock */}\r\n      <div\r\n        className={`text-[11px] font-semibold mb-3 ${clockGlow} px-4`}\r\n        style={{\r\n          textShadow:\r\n            avgRisk >= 80\r\n              ? \"0 0 8px rgba(220,38,38,0.8)\"\r\n              : avgRisk >= 50\r\n              ? \"0 0 8px rgba(245,158,11,0.7)\"\r\n              : \"0 0 8px rgba(59,130,246,0.7)\",\r\n          animation: `glowPulse ${heartbeatSpeed}s ease-in-out infinite`,\r\n        }}\r\n      >\r\n        üåê UTC Time | {utcTime || \"Loading...\"}\r\n      </div>\r\n\r\n      {/* Risk label */}\r\n      <div\r\n        className={`text-xs font-medium mb-2 text-right px-4 ${\r\n          avgRisk >= 80\r\n            ? \"text-red-600\"\r\n            : avgRisk >= 50\r\n            ? \"text-amber-500\"\r\n            : \"text-blue-600\"\r\n        }`}\r\n      >\r\n        {shimmerLabel}\r\n      </div>\r\n\r\n      {/* Country List */}\r\n      <div className=\"px-4 pb-4 flex-1 overflow-y-auto\">\r\n        {loading ? (\r\n          <div className=\"text-slate-500 text-sm\">Loading countries‚Ä¶</div>\r\n        ) : (\r\n          <ul\r\n            className={`space-y-2 transition-opacity duration-500 ${\r\n              fade ? \"opacity-50\" : \"opacity-100\"\r\n            }`}\r\n          >\r\n            {countries.map((c) => {\r\n              const prev = prevCountries[c.id];\r\n              const hasChanged = prev !== undefined && prev !== c.risk_score;\r\n              const changeColor =\r\n                c.risk_score >= 80\r\n                  ? \"bg-red-100\"\r\n                  : c.risk_score >= 50\r\n                  ? \"bg-amber-100\"\r\n                  : \"bg-blue-100\";\r\n\r\n              return (\r\n                <li\r\n                  key={c.id}\r\n                  className={`flex justify-between items-center border-b pb-1 text-sm px-1 rounded transition-all duration-[1500ms] ease-in-out ${\r\n                    hasChanged ? changeColor : \"bg-transparent\"\r\n                  }`}\r\n                >\r\n                  <span className=\"font-medium text-slate-700\">{c.name}</span>\r\n                  <span\r\n                    className={`font-semibold ${\r\n                      c.risk_score >= 80\r\n                        ? \"text-red-600\"\r\n                        : c.risk_score >= 50\r\n                        ? \"text-amber-500\"\r\n                        : \"text-blue-600\"\r\n                    }`}\r\n                  >\r\n                    {c.risk_score}\r\n                  </span>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"mt-1 text-[11px] text-slate-400 text-right px-4 pb-2\">\r\n        Last updated {lastUpdated || \"‚Äì\"}\r\n      </div>\r\n\r\n      <style jsx global>{`\r\n        @keyframes heartbeat {\r\n          0%,100%{transform:scale(1);opacity:.85}\r\n          30%{transform:scale(1.3);opacity:1}\r\n          60%{transform:scale(1.1);opacity:.95}\r\n        }\r\n        @keyframes glowPulse {\r\n          0%,100%{filter:brightness(1);opacity:.9}\r\n          30%{filter:brightness(1.3);opacity:1}\r\n          60%{filter:brightness(1.1);opacity:.95}\r\n        }\r\n        @keyframes flashRed {\r\n          0%{box-shadow:0 0 0 rgba(220,38,38,0)}\r\n          25%{box-shadow:0 0 25px rgba(220,38,38,0.6)}\r\n          100%{box-shadow:0 0 0 rgba(220,38,38,0)}\r\n        }\r\n        @keyframes flashBlue {\r\n          0%{box-shadow:0 0 0 rgba(59,130,246,0)}\r\n          25%{box-shadow:0 0 25px rgba(59,130,246,0.6)}\r\n          100%{box-shadow:0 0 0 rgba(59,130,246,0)}\r\n        }\r\n        .animate-flashRed{animation:flashRed 2s ease-out}\r\n        .animate-flashBlue{animation:flashBlue 2s ease-out}\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/app/intel/%5Bcountry%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport NewsFeed from \"@/components/NewsFeed\";\r\nimport CrashWatch from \"@/components/CrashWatch\";\r\n\r\nexport default function CountryIntelPage() {\r\n  const { country } = useParams() as { country: string };\r\n  const router = useRouter();\r\n\r\n  const [risk, setRisk] = useState<number | null>(null);\r\n  const [sentiment, setSentiment] = useState<number | null>(null);\r\n\r\n  // Normalize slug and map to ISO code\r\n  const slug = (country ?? \"\").toString().trim().toLowerCase();\r\n  const COUNTRY_MAP: Record<string, string> = {\r\n    \"united-states\": \"us\", \"china\": \"cn\", \"india\": \"in\", \"russia\": \"ru\", \"brazil\": \"br\",\r\n    \"germany\": \"de\", \"france\": \"fr\", \"mexico\": \"mx\", \"saudi-arabia\": \"sa\", \"canada\": \"ca\",\r\n    \"australia\": \"au\", \"united-kingdom\": \"gb\", \"japan\": \"jp\", \"south-korea\": \"kr\",\r\n    \"italy\": \"it\", \"argentina\": \"ar\", \"turkey\": \"tr\", \"south-africa\": \"za\", \"indonesia\": \"id\",\r\n    \"european-union\": \"eu\", \"nigeria\": \"ng\", \"egypt\": \"eg\", \"israel\": \"il\", \"iran\": \"ir\",\r\n    \"pakistan\": \"pk\", \"singapore\": \"sg\", \"thailand\": \"th\", \"vietnam\": \"vn\", \"philippines\": \"ph\",\r\n    \"uae\": \"ae\", \"qatar\": \"qa\",\r\n  };\r\n\r\n  const isoCode = COUNTRY_MAP[slug] || \"us\";\r\n  const flagUrl = `https://flagcdn.com/h80/${isoCode}.png`;\r\n\r\n  const emojiFlag = String.fromCodePoint(\r\n    ...isoCode.toUpperCase().split(\"\").map((ch) => 127397 + ch.charCodeAt(0))\r\n  );\r\n\r\n  // Demo metrics\r\n  useEffect(() => {\r\n    const riskLevels: Record<string, number> = { us: 82, cn: 76, br: 64, de: 48, jp: 42, in: 38 };\r\n    setRisk(riskLevels[isoCode] ?? Math.floor(Math.random() * 100));\r\n    setSentiment(Math.round(Math.random() * 100) - 50);\r\n  }, [isoCode]);\r\n\r\n  const color =\r\n    risk && risk > 70 ? \"text-red-400\" : risk && risk > 50 ? \"text-yellow-300\" : \"text-emerald-400\";\r\n  const sentimentColor = sentiment && sentiment < 0 ? \"text-red-400\" : \"text-emerald-400\";\r\n\r\n  const sentimentText =\r\n    sentiment && sentiment < 0\r\n      ? \"Negative tone ‚Äî cautious outlook\"\r\n      : \"Positive tone ‚Äî constructive sentiment\";\r\n\r\n  const formattedCountry =\r\n    slug.replace(/-/g, \" \").replace(/\\b\\w/g, (c) => c.toUpperCase()) || \"Unknown\";\r\n\r\n  return (\r\n    <main className=\"relative min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-black text-slate-100 px-6 py-10 overflow-hidden\">\r\n      {/* üåä Background flag watermark */}\r\n      <div\r\n        className=\"absolute inset-0 opacity-[0.05] flex justify-center items-start pointer-events-none select-none\"\r\n        style={{\r\n          backgroundImage: `url(https://flagcdn.com/w320/${isoCode}.png)`,\r\n          backgroundRepeat: \"no-repeat\",\r\n          backgroundPosition: \"center 60px\",\r\n          backgroundSize: \"60%\",\r\n        }}\r\n      />\r\n\r\n      <div className=\"relative max-w-5xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* üåå Flag Glow Wrapper */}\r\n            <div className=\"relative flex items-center justify-center w-16 h-12\">\r\n              <div className=\"absolute inset-0 bg-blue-400/20 rounded-full blur-xl animate-pulse\" />\r\n              <Image\r\n                src={flagUrl}\r\n                alt={formattedCountry}\r\n                width={64}\r\n                height={48}\r\n                className=\"rounded-sm border border-slate-600 bg-slate-900 relative z-10\"\r\n                unoptimized\r\n              />\r\n              <span className=\"absolute text-3xl z-0 opacity-30\">{emojiFlag}</span>\r\n            </div>\r\n\r\n            <div>\r\n              <h1 className=\"text-2xl font-semibold text-blue-300\">\r\n                {formattedCountry} ‚Äî Intelligence Dashboard\r\n              </h1>\r\n              <p className=\"text-sm text-slate-400\">\r\n                Live financial and geopolitical signals by region\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={() => router.push(\"/\")}\r\n            className=\"px-3 py-1.5 rounded-md border border-slate-600 text-sm text-slate-300 hover:bg-slate-800 hover:text-white transition\"\r\n          >\r\n            ‚Üê Back\r\n          </button>\r\n        </div>\r\n\r\n        {/* Metrics */}\r\n        <div className=\"grid md:grid-cols-2 gap-4 mb-10\">\r\n          <div className=\"rounded-lg border border-slate-700 bg-slate-800/60 p-4 shadow-sm backdrop-blur-sm\">\r\n            <h2 className=\"text-xs uppercase text-slate-400 mb-1\">Risk Index</h2>\r\n            <div className={`text-3xl font-bold ${color}`}>{risk ?? \"--\"}</div>\r\n            <p className=\"text-sm text-slate-400 mt-1\">\r\n              {risk && risk > 70\r\n                ? \"‚ö†Ô∏è Elevated systemic stress\"\r\n                : risk && risk > 50\r\n                ? \"‚ö†Ô∏è Caution ‚Äî medium risk\"\r\n                : \"‚úÖ Stable financial conditions\"}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"rounded-lg border border-slate-700 bg-slate-800/60 p-4 shadow-sm backdrop-blur-sm\">\r\n            <h2 className=\"text-xs uppercase text-slate-400 mb-1\">News Sentiment</h2>\r\n            <div className={`text-3xl font-bold ${sentimentColor}`}>{sentiment}</div>\r\n            <p className=\"text-sm text-slate-400 mt-1\">{sentimentText}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Feed */}\r\n        <section>\r\n          <h2 className=\"text-lg font-semibold text-blue-300 mb-3\">\r\n            üì∞ Latest Reports & Analysis\r\n          </h2>\r\n          <NewsFeed\r\n            asset={formattedCountry.toUpperCase()}\r\n            topic=\"macro\"\r\n            region={formattedCountry.toUpperCase()}\r\n          />\r\n        </section>\r\n\r\n        {/* CrashWatch */}\r\n        <section className=\"mt-10\">\r\n          <h3 className=\"text-sm uppercase text-slate-400 mb-2\">\r\n            Global Crash Overview\r\n          </h3>\r\n          <CrashWatch />\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}