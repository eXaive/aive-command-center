{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/components/GlobeView.tsx"],"sourcesContent":["// components/GlobeView.tsx\r\n\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\nexport default function GlobeView({\r\n  width = 240,\r\n  height = 210,\r\n  title = \"Global View\",\r\n}: {\r\n  width?: number;\r\n  height?: number;\r\n  title?: string;\r\n}) {\r\n  const r = Math.min(width, height) * 0.42;\r\n  const cx = width / 2;\r\n  const cy = height / 2;\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"text-xs text-slate-500 mb-2\">{title}</div>\r\n      <svg width={width} height={height} className=\"block mx-auto\">\r\n        <defs>\r\n          <radialGradient id=\"glb\" cx=\"50%\" cy=\"45%\" r=\"60%\">\r\n            <stop offset=\"0%\" stopColor=\"#93C5FD\" />\r\n            <stop offset=\"65%\" stopColor=\"#60A5FA\" />\r\n            <stop offset=\"100%\" stopColor=\"#3B82F6\" />\r\n          </radialGradient>\r\n        </defs>\r\n        {/* sphere */}\r\n        <circle cx={cx} cy={cy} r={r} fill=\"url(#glb)\" stroke=\"#1E3A8A\" strokeWidth={1} />\r\n\r\n        {/* simple lat/long lines */}\r\n        {[ -60, -30, 0, 30, 60 ].map((lat, i) => (\r\n          <ellipse\r\n            key={`lat-${i}`}\r\n            cx={cx}\r\n            cy={cy}\r\n            rx={r * Math.cos((lat * Math.PI) / 180)}\r\n            ry={r * 0.35}\r\n            fill=\"none\"\r\n            stroke=\"rgba(255,255,255,0.55)\"\r\n            strokeWidth={0.7}\r\n          />\r\n        ))}\r\n        {[ -90, -45, 0, 45, 90 ].map((lng, i) => (\r\n          <path\r\n            key={`lng-${i}`}\r\n            d={describeMeridian(cx, cy, r, (lng * Math.PI) / 180)}\r\n            fill=\"none\"\r\n            stroke=\"rgba(255,255,255,0.45)\"\r\n            strokeWidth={0.7}\r\n          />\r\n        ))}\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\n// simple meridian path approximation (cosine flattening)\r\nfunction describeMeridian(cx: number, cy: number, r: number, angle: number) {\r\n  const steps = 40;\r\n  const pts: string[] = [];\r\n  for (let i = 0; i <= steps; i++) {\r\n    const t = -Math.PI / 2 + (i / steps) * Math.PI; // -90..+90 latitude\r\n    const x = cx + r * Math.cos(t) * Math.cos(angle);\r\n    const y = cy + r * Math.sin(t);\r\n    pts.push(`${i === 0 ? \"M\" : \"L\"} ${x.toFixed(2)} ${y.toFixed(2)}`);\r\n  }\r\n  return pts.join(\" \");\r\n}\r\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;AAC3B;;AAIe,SAAS,UAAU,EAChC,QAAQ,GAAG,EACX,SAAS,GAAG,EACZ,QAAQ,aAAa,EAKtB;IACC,MAAM,IAAI,KAAK,GAAG,CAAC,OAAO,UAAU;IACpC,MAAM,KAAK,QAAQ;IACnB,MAAM,KAAK,SAAS;IAEpB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BAA+B;;;;;;0BAC9C,8OAAC;gBAAI,OAAO;gBAAO,QAAQ;gBAAQ,WAAU;;kCAC3C,8OAAC;kCACC,cAAA,8OAAC;4BAAe,IAAG;4BAAM,IAAG;4BAAM,IAAG;4BAAM,GAAE;;8CAC3C,8OAAC;oCAAK,QAAO;oCAAK,WAAU;;;;;;8CAC5B,8OAAC;oCAAK,QAAO;oCAAM,WAAU;;;;;;8CAC7B,8OAAC;oCAAK,QAAO;oCAAO,WAAU;;;;;;;;;;;;;;;;;kCAIlC,8OAAC;wBAAO,IAAI;wBAAI,IAAI;wBAAI,GAAG;wBAAG,MAAK;wBAAY,QAAO;wBAAU,aAAa;;;;;;oBAG5E;wBAAE,CAAC;wBAAI,CAAC;wBAAI;wBAAG;wBAAI;qBAAI,CAAC,GAAG,CAAC,CAAC,KAAK,kBACjC,8OAAC;4BAEC,IAAI;4BACJ,IAAI;4BACJ,IAAI,IAAI,KAAK,GAAG,CAAC,AAAC,MAAM,KAAK,EAAE,GAAI;4BACnC,IAAI,IAAI;4BACR,MAAK;4BACL,QAAO;4BACP,aAAa;2BAPR,CAAC,IAAI,EAAE,GAAG;;;;;oBAUlB;wBAAE,CAAC;wBAAI,CAAC;wBAAI;wBAAG;wBAAI;qBAAI,CAAC,GAAG,CAAC,CAAC,KAAK,kBACjC,8OAAC;4BAEC,GAAG,iBAAiB,IAAI,IAAI,GAAG,AAAC,MAAM,KAAK,EAAE,GAAI;4BACjD,MAAK;4BACL,QAAO;4BACP,aAAa;2BAJR,CAAC,IAAI,EAAE,GAAG;;;;;;;;;;;;;;;;;AAU3B;AAEA,yDAAyD;AACzD,SAAS,iBAAiB,EAAU,EAAE,EAAU,EAAE,CAAS,EAAE,KAAa;IACxE,MAAM,QAAQ;IACd,MAAM,MAAgB,EAAE;IACxB,IAAK,IAAI,IAAI,GAAG,KAAK,OAAO,IAAK;QAC/B,MAAM,IAAI,CAAC,KAAK,EAAE,GAAG,IAAI,AAAC,IAAI,QAAS,KAAK,EAAE,EAAE,oBAAoB;QACpE,MAAM,IAAI,KAAK,IAAI,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC;QAC1C,MAAM,IAAI,KAAK,IAAI,KAAK,GAAG,CAAC;QAC5B,IAAI,IAAI,CAAC,GAAG,MAAM,IAAI,MAAM,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI;IACnE;IACA,OAAO,IAAI,IAAI,CAAC;AAClB","debugId":null}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/components/CrashWatch.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\n\r\ninterface Country {\r\n  id: number;\r\n  name: string;\r\n  code: string;\r\n  risk_score: number;\r\n  status_color: string;\r\n}\r\n\r\nexport default function CrashWatch() {\r\n  const [countries, setCountries] = useState<Country[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  // fetch countries\r\n  useEffect(() => {\r\n    async function loadCountries() {\r\n      setLoading(true);\r\n      const { data, error } = await supabase\r\n        .from(\"countries\")\r\n        .select(\"id, name, code, risk_score, status_color\")\r\n        .order(\"risk_score\", { ascending: false });\r\n      if (error) console.error(\"❌ Supabase fetch error:\", error);\r\n      else setCountries(data || []);\r\n      setLoading(false);\r\n    }\r\n\r\n    loadCountries();\r\n\r\n    // optional: auto-refresh every minute\r\n    const timer = setInterval(loadCountries, 60 * 1000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"p-4 text-sm text-slate-500\">Loading Crash Watch...</div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"p-3 rounded-lg border bg-white overflow-y-auto max-h-[600px]\">\r\n      <h2 className=\"text-sm uppercase font-semibold text-slate-500 mb-2\">\r\n        Crash Watch\r\n      </h2>\r\n\r\n      {countries.length === 0 ? (\r\n        <div className=\"text-sm text-slate-500\">No data available.</div>\r\n      ) : (\r\n        <ul className=\"space-y-2\">\r\n          {countries.map((c) => (\r\n            <li\r\n              key={c.id}\r\n              onClick={() => router.push(`/intel/${c.code}`)}\r\n              className=\"flex items-center justify-between p-2 rounded-md border hover:bg-slate-50 transition cursor-pointer\"\r\n            >\r\n              <div className=\"flex items-center gap-2\">\r\n                {/* flag */}\r\n                <Image\r\n                  src={`https://flagcdn.com/24x18/${c.code.toLowerCase()}.png`}\r\n                  alt={c.name}\r\n                  width={24}\r\n                  height={18}\r\n                  unoptimized\r\n                  className=\"border rounded-sm\"\r\n                />\r\n                <span className=\"text-sm font-medium text-slate-800\">\r\n                  {c.name}\r\n                </span>\r\n              </div>\r\n\r\n              <div\r\n                className={`text-sm font-semibold ${\r\n                  c.status_color === \"red\"\r\n                    ? \"text-red-600\"\r\n                    : c.status_color === \"amber\"\r\n                    ? \"text-amber-500\"\r\n                    : \"text-blue-600\"\r\n                }`}\r\n              >\r\n                {c.risk_score}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAee,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,kBAAkB;IAClB,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,WAAW;YACX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CACnC,IAAI,CAAC,aACL,MAAM,CAAC,4CACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAC1C,IAAI,OAAO,QAAQ,KAAK,CAAC,2BAA2B;iBAC/C,aAAa,QAAQ,EAAE;YAC5B,WAAW;QACb;QAEA;QAEA,sCAAsC;QACtC,MAAM,QAAQ,YAAY,eAAe,KAAK;QAC9C,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,IAAI,SACF,qBACE,8OAAC;QAAI,WAAU;kBAA6B;;;;;;IAGhD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAsD;;;;;;YAInE,UAAU,MAAM,KAAK,kBACpB,8OAAC;gBAAI,WAAU;0BAAyB;;;;;qCAExC,8OAAC;gBAAG,WAAU;0BACX,UAAU,GAAG,CAAC,CAAC,kBACd,8OAAC;wBAEC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,IAAI,EAAE;wBAC7C,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDAEb,8OAAC,wIAAK;wCACJ,KAAK,CAAC,0BAA0B,EAAE,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;wCAC5D,KAAK,EAAE,IAAI;wCACX,OAAO;wCACP,QAAQ;wCACR,WAAW;wCACX,WAAU;;;;;;kDAEZ,8OAAC;wCAAK,WAAU;kDACb,EAAE,IAAI;;;;;;;;;;;;0CAIX,8OAAC;gCACC,WAAW,CAAC,sBAAsB,EAChC,EAAE,YAAY,KAAK,QACf,iBACA,EAAE,YAAY,KAAK,UACnB,mBACA,iBACJ;0CAED,EAAE,UAAU;;;;;;;uBA5BV,EAAE,EAAE;;;;;;;;;;;;;;;;AAoCvB","debugId":null}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/components/NewsFeed.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\ninterface NewsFeedProps {\r\n  asset?: string;\r\n  topic?: string;\r\n  region?: string;\r\n  date?: string;\r\n}\r\n\r\ninterface NewsItem {\r\n  title: string;\r\n  link: string;\r\n  pubDate?: string;\r\n  source?: string;\r\n}\r\n\r\nexport default function NewsFeed({ asset, topic, region }: NewsFeedProps) {\r\n  const [news, setNews] = useState<NewsItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n\r\n    async function load() {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(\r\n          `/api/news?asset=${asset || \"\"}&topic=${topic || \"\"}&region=${region || \"\"}`\r\n        );\r\n        const data = await res.json();\r\n        if (active) setNews(data.items || []);\r\n      } catch (err) {\r\n        console.error(\"❌ News fetch failed\", err);\r\n        if (active) setNews([]);\r\n      } finally {\r\n        if (active) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n    const timer = setInterval(load, 10 * 60 * 1000); // auto-refresh every 10 minutes\r\n\r\n    return () => {\r\n      active = false;\r\n      clearInterval(timer);\r\n    };\r\n  }, [asset, topic, region]);\r\n\r\n  if (loading)\r\n    return <div className=\"text-sm text-slate-500\">Loading news...</div>;\r\n\r\n  if (!news.length)\r\n    return <div className=\"text-sm text-slate-500\">No recent articles found.</div>;\r\n\r\n  return (\r\n    <div className=\"space-y-3 animate-fadeIn\">\r\n      {news.map((item, i) => (\r\n        <a\r\n          key={i}\r\n          href={item.link}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"block border rounded-md p-3 hover:bg-slate-50 transition\"\r\n        >\r\n          <div className=\"text-sm font-medium text-slate-900\">{item.title}</div>\r\n          <div className=\"text-[11px] text-slate-500 mt-0.5\">\r\n            {item.source && <span>{item.source}</span>}{\" \"}\r\n            {item.pubDate && (\r\n              <span>• {new Date(item.pubDate).toLocaleDateString()}</span>\r\n            )}\r\n          </div>\r\n        </a>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAkBe,SAAS,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAiB;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS;QAEb,eAAe;YACb,WAAW;YACX,IAAI;gBACF,MAAM,MAAM,MAAM,MAChB,CAAC,gBAAgB,EAAE,SAAS,GAAG,OAAO,EAAE,SAAS,GAAG,QAAQ,EAAE,UAAU,IAAI;gBAE9E,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,QAAQ,QAAQ,KAAK,KAAK,IAAI,EAAE;YACtC,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,uBAAuB;gBACrC,IAAI,QAAQ,QAAQ,EAAE;YACxB,SAAU;gBACR,IAAI,QAAQ,WAAW;YACzB;QACF;QAEA;QACA,MAAM,QAAQ,YAAY,MAAM,KAAK,KAAK,OAAO,gCAAgC;QAEjF,OAAO;YACL,SAAS;YACT,cAAc;QAChB;IACF,GAAG;QAAC;QAAO;QAAO;KAAO;IAEzB,IAAI,SACF,qBAAO,8OAAC;QAAI,WAAU;kBAAyB;;;;;;IAEjD,IAAI,CAAC,KAAK,MAAM,EACd,qBAAO,8OAAC;QAAI,WAAU;kBAAyB;;;;;;IAEjD,qBACE,8OAAC;QAAI,WAAU;kBACZ,KAAK,GAAG,CAAC,CAAC,MAAM,kBACf,8OAAC;gBAEC,MAAM,KAAK,IAAI;gBACf,QAAO;gBACP,KAAI;gBACJ,WAAU;;kCAEV,8OAAC;wBAAI,WAAU;kCAAsC,KAAK,KAAK;;;;;;kCAC/D,8OAAC;wBAAI,WAAU;;4BACZ,KAAK,MAAM,kBAAI,8OAAC;0CAAM,KAAK,MAAM;;;;;;4BAAU;4BAC3C,KAAK,OAAO,kBACX,8OAAC;;oCAAK;oCAAG,IAAI,KAAK,KAAK,OAAO,EAAE,kBAAkB;;;;;;;;;;;;;;eAVjD;;;;;;;;;;AAiBf","debugId":null}}]
}