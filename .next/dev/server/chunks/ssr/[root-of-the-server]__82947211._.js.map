{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/components/GlobeView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\n// Load Globe only on the client side\r\nconst Globe = dynamic(() => import(\"react-globe.gl\"), { ssr: false });\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n\r\ninterface CountryData {\r\n  id: number;\r\n  name: string;\r\n  region: string;\r\n  risk_score: number;\r\n  confidence_score?: number; // for future AI verification\r\n}\r\n\r\ninterface GlobeViewProps {\r\n  width?: number;\r\n  height?: number;\r\n  regionPing?: string;\r\n}\r\n\r\nconst COUNTRY_COORDS: Record<string, { lat: number; lng: number }> = {\r\n  US: { lat: 37.0902, lng: -95.7129 },\r\n  CN: { lat: 35.8617, lng: 104.1954 },\r\n  IN: { lat: 20.5937, lng: 78.9629 },\r\n  DE: { lat: 51.1657, lng: 10.4515 },\r\n  JP: { lat: 36.2048, lng: 138.2529 },\r\n  BR: { lat: -14.235, lng: -51.9253 },\r\n  NG: { lat: 9.082, lng: 8.6753 },\r\n  RU: { lat: 61.524, lng: 105.3188 },\r\n  ZA: { lat: -30.5595, lng: 22.9375 },\r\n  AU: { lat: -25.2744, lng: 133.7751 },\r\n};\r\n\r\nexport default function GlobeView({\r\n  width = 320,\r\n  height = 320,\r\n  regionPing,\r\n}: GlobeViewProps) {\r\n  const globeRef = useRef<any>();\r\n  const [data, setData] = useState<CountryData[]>([]);\r\n  const [hovered, setHovered] = useState<string | null>(null);\r\n  const [angle, setAngle] = useState(0);\r\n\r\n  // === Fetch from Supabase ===\r\n  async function loadData() {\r\n    const { data, error } = await supabase.from(\"countries\").select(\"*\");\r\n    if (error) console.error(\"‚ùå Error loading Supabase data:\", error);\r\n    if (data) setData(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n\r\n    const channel = supabase\r\n      .channel(\"countries-live\")\r\n      .on(\r\n        \"postgres_changes\",\r\n        { event: \"UPDATE\", schema: \"public\", table: \"countries\" },\r\n        (payload) => {\r\n          const updated = payload.new as CountryData;\r\n          setData((prev) =>\r\n            prev.map((c) => (c.id === updated.id ? updated : c))\r\n          );\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, []);\r\n\r\n  // === Build globe labels ===\r\n  const labels = Object.keys(COUNTRY_COORDS).map((code) => {\r\n    const match = data.find(\r\n      (c) => c.region?.toUpperCase() === code.toUpperCase()\r\n    );\r\n    const score = match?.risk_score ?? 0;\r\n    const confidence = match?.confidence_score ?? 70; // AI tie-in point\r\n\r\n    // === AI-inspired color logic ===\r\n    let color = \"rgba(147,197,253,0.9)\"; // Stable\r\n    if (confidence < 40) color = \"rgba(239,68,68,0.9)\"; // Red ‚Äì Low confidence\r\n    else if (confidence < 70) color = \"rgba(251,191,36,0.9)\"; // Yellow ‚Äì Medium\r\n    else if (score >= 80) color = \"rgba(255,100,100,0.9)\"; // Override: High risk\r\n    else if (score >= 60) color = \"rgba(255,200,100,0.9)\";\r\n\r\n    return {\r\n      ...COUNTRY_COORDS[code],\r\n      text: code,\r\n      size: hovered === code ? 3.2 : 1.6,\r\n      color: hovered === code ? \"rgba(255,255,255,1)\" : color,\r\n      risk_score: score,\r\n      confidence_score: confidence,\r\n      name: match?.name || code,\r\n    };\r\n  });\r\n\r\n  // === Auto-focus on selected region ===\r\n  useEffect(() => {\r\n    if (!globeRef.current) return;\r\n    if (regionPing && COUNTRY_COORDS[regionPing]) {\r\n      const coords = COUNTRY_COORDS[regionPing];\r\n      globeRef.current.pointOfView(\r\n        { lat: coords.lat, lng: coords.lng, altitude: 1.5 },\r\n        1500\r\n      );\r\n    }\r\n  }, [regionPing]);\r\n\r\n  // === Subtle auto-rotation ===\r\n  useEffect(() => {\r\n    const globe = globeRef.current;\r\n    if (!globe) return;\r\n    const controls = globe.controls();\r\n    controls.autoRotate = true;\r\n    controls.autoRotateSpeed = 0.25; // gentle slow spin\r\n    globe.pointOfView({ altitude: 2.4 });\r\n  }, []);\r\n\r\n  // === Radar sweep rotation ===\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setAngle((prev) => (prev + 2) % 360);\r\n    }, 100);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {/* === Globe === */}\r\n      <Globe\r\n        ref={globeRef}\r\n        width={width}\r\n        height={height}\r\n        backgroundColor=\"rgba(0,0,0,0)\"\r\n        globeImageUrl=\"//unpkg.com/three-globe/example/img/earth-dark.jpg\"\r\n        bumpImageUrl=\"//unpkg.com/three-globe/example/img/earth-topology.png\"\r\n        showAtmosphere\r\n        atmosphereColor=\"lightskyblue\"\r\n        atmosphereAltitude={0.2}\r\n        labelsData={labels}\r\n        labelLat={(d: any) => d.lat}\r\n        labelLng={(d: any) => d.lng}\r\n        labelText={(d: any) => d.text}\r\n        labelSize={(d: any) => d.size}\r\n        labelColor={(d: any) => d.color}\r\n        labelDotRadius={0.6}\r\n        labelResolution={2}\r\n        animateIn\r\n        onLabelHover={(label: any) => setHovered(label ? label.text : null)}\r\n        onLabelClick={(label: any) => setHovered(label.text)}\r\n        labelAltitude={(d: any) => (hovered === d.text ? 0.05 : 0.01)}\r\n      />\r\n\r\n      {/* === Tooltip on hover === */}\r\n      {hovered && (\r\n        <div className=\"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900/90 text-slate-100 text-xs rounded-md px-3 py-2 shadow-lg backdrop-blur-sm border border-slate-700 pointer-events-none animate-fade\">\r\n          {(() => {\r\n            const country = labels.find((l) => l.text === hovered);\r\n            const risk = country?.risk_score ?? 0;\r\n            const conf = country?.confidence_score ?? 70;\r\n            const status =\r\n              risk >= 80\r\n                ? \"‚ö†Ô∏è High Risk\"\r\n                : risk >= 60\r\n                ? \"üü° Moderate\"\r\n                : \"üü¶ Stable\";\r\n            return (\r\n              <div>\r\n                <div className=\"font-semibold text-sm\">{country?.name}</div>\r\n                <div className=\"text-amber-300\">\r\n                  Risk: {risk} | Confidence: {conf}%\r\n                </div>\r\n                <div className=\"text-slate-400\">{status}</div>\r\n              </div>\r\n            );\r\n          })()}\r\n        </div>\r\n      )}\r\n\r\n      {/* === Radar sweep overlay === */}\r\n      <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n        <div className=\"w-[160%] h-[160%] rounded-full bg-[conic-gradient(from_0deg,rgba(59,130,246,0.2)_0deg,rgba(250,204,21,0.25)_60deg,transparent_120deg)] animate-radar blur-xl opacity-40\" />\r\n        <div\r\n          className=\"absolute w-4 h-4 rounded-full bg-amber-300 blur-md opacity-80 animate-pulse\"\r\n          style={{\r\n            transform: `rotate(${angle}deg) translateX(120px)`,\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* === Legend Overlay === */}\r\n      <div className=\"absolute top-3 right-3 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-md text-[11px] text-slate-700 p-2 shadow-md\">\r\n        <div className=\"font-semibold text-[12px] mb-1 text-slate-800\">\r\n          Legend\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <span className=\"w-3 h-3 rounded-full bg-blue-400\" /> <span>Stable</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <span className=\"w-3 h-3 rounded-full bg-amber-400\" /> <span>Moderate</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <span className=\"w-3 h-3 rounded-full bg-red-500\" /> <span>High Risk</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* === Animations === */}\r\n      <style jsx global>{`\r\n        @keyframes fade {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(-4px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n        .animate-fade {\r\n          animation: fade 0.3s ease-out forwards;\r\n        }\r\n\r\n        @keyframes radar {\r\n          0% {\r\n            transform: rotate(0deg);\r\n          }\r\n          100% {\r\n            transform: rotate(360deg);\r\n          }\r\n        }\r\n        .animate-radar {\r\n          animation: radar 6s linear infinite;\r\n          transform-origin: center;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;;AAJA;;;;;;AAMA,qCAAqC;AACrC,MAAM,QAAQ,IAAA,0KAAO;;;;;;IAAmC,KAAK;;AAE7D,MAAM,WAAW,IAAA,uMAAY;AAmB7B,MAAM,iBAA+D;IACnE,IAAI;QAAE,KAAK;QAAS,KAAK,CAAC;IAAQ;IAClC,IAAI;QAAE,KAAK;QAAS,KAAK;IAAS;IAClC,IAAI;QAAE,KAAK;QAAS,KAAK;IAAQ;IACjC,IAAI;QAAE,KAAK;QAAS,KAAK;IAAQ;IACjC,IAAI;QAAE,KAAK;QAAS,KAAK;IAAS;IAClC,IAAI;QAAE,KAAK,CAAC;QAAQ,KAAK,CAAC;IAAQ;IAClC,IAAI;QAAE,KAAK;QAAO,KAAK;IAAO;IAC9B,IAAI;QAAE,KAAK;QAAQ,KAAK;IAAS;IACjC,IAAI;QAAE,KAAK,CAAC;QAAS,KAAK;IAAQ;IAClC,IAAI;QAAE,KAAK,CAAC;QAAS,KAAK;IAAS;AACrC;AAEe,SAAS,UAAU,EAChC,QAAQ,GAAG,EACX,SAAS,GAAG,EACZ,UAAU,EACK;IACf,MAAM,WAAW,IAAA,+MAAM;IACvB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,8BAA8B;IAC9B,eAAe;QACb,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,aAAa,MAAM,CAAC;QAChE,IAAI,OAAO,QAAQ,KAAK,CAAC,kCAAkC;QAC3D,IAAI,MAAM,QAAQ;IACpB;IAEA,IAAA,kNAAS,EAAC;QACR;QAEA,MAAM,UAAU,SACb,OAAO,CAAC,kBACR,EAAE,CACD,oBACA;YAAE,OAAO;YAAU,QAAQ;YAAU,OAAO;QAAY,GACxD,CAAC;YACC,MAAM,UAAU,QAAQ,GAAG;YAC3B,QAAQ,CAAC,OACP,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG,UAAU;QAErD,GAED,SAAS;QAEZ,OAAO;YACL,SAAS,aAAa,CAAC;QACzB;IACF,GAAG,EAAE;IAEL,6BAA6B;IAC7B,MAAM,SAAS,OAAO,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;QAC9C,MAAM,QAAQ,KAAK,IAAI,CACrB,CAAC,IAAM,EAAE,MAAM,EAAE,kBAAkB,KAAK,WAAW;QAErD,MAAM,QAAQ,OAAO,cAAc;QACnC,MAAM,aAAa,OAAO,oBAAoB,IAAI,kBAAkB;QAEpE,kCAAkC;QAClC,IAAI,QAAQ,yBAAyB,SAAS;QAC9C,IAAI,aAAa,IAAI,QAAQ,uBAAuB,uBAAuB;aACtE,IAAI,aAAa,IAAI,QAAQ,wBAAwB,kBAAkB;aACvE,IAAI,SAAS,IAAI,QAAQ,yBAAyB,sBAAsB;aACxE,IAAI,SAAS,IAAI,QAAQ;QAE9B,OAAO;YACL,GAAG,cAAc,CAAC,KAAK;YACvB,MAAM;YACN,MAAM,YAAY,OAAO,MAAM;YAC/B,OAAO,YAAY,OAAO,wBAAwB;YAClD,YAAY;YACZ,kBAAkB;YAClB,MAAM,OAAO,QAAQ;QACvB;IACF;IAEA,wCAAwC;IACxC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS,OAAO,EAAE;QACvB,IAAI,cAAc,cAAc,CAAC,WAAW,EAAE;YAC5C,MAAM,SAAS,cAAc,CAAC,WAAW;YACzC,SAAS,OAAO,CAAC,WAAW,CAC1B;gBAAE,KAAK,OAAO,GAAG;gBAAE,KAAK,OAAO,GAAG;gBAAE,UAAU;YAAI,GAClD;QAEJ;IACF,GAAG;QAAC;KAAW;IAEf,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QACZ,MAAM,WAAW,MAAM,QAAQ;QAC/B,SAAS,UAAU,GAAG;QACtB,SAAS,eAAe,GAAG,MAAM,mBAAmB;QACpD,MAAM,WAAW,CAAC;YAAE,UAAU;QAAI;IACpC,GAAG,EAAE;IAEL,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,YAAY;YACxB,SAAS,CAAC,OAAS,CAAC,OAAO,CAAC,IAAI;QAClC,GAAG;QACH,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,qBACE,8OAAC;kDAAc;;0BAEb,8OAAC;gBACC,KAAK;gBACL,OAAO;gBACP,QAAQ;gBACR,iBAAgB;gBAChB,eAAc;gBACd,cAAa;gBACb,cAAc;gBACd,iBAAgB;gBAChB,oBAAoB;gBACpB,YAAY;gBACZ,UAAU,CAAC,IAAW,EAAE,GAAG;gBAC3B,UAAU,CAAC,IAAW,EAAE,GAAG;gBAC3B,WAAW,CAAC,IAAW,EAAE,IAAI;gBAC7B,WAAW,CAAC,IAAW,EAAE,IAAI;gBAC7B,YAAY,CAAC,IAAW,EAAE,KAAK;gBAC/B,gBAAgB;gBAChB,iBAAiB;gBACjB,SAAS;gBACT,cAAc,CAAC,QAAe,WAAW,QAAQ,MAAM,IAAI,GAAG;gBAC9D,cAAc,CAAC,QAAe,WAAW,MAAM,IAAI;gBACnD,eAAe,CAAC,IAAY,YAAY,EAAE,IAAI,GAAG,OAAO;;;;;;YAIzD,yBACC,8OAAC;0DAAc;0BACZ,CAAC;oBACA,MAAM,UAAU,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;oBAC9C,MAAM,OAAO,SAAS,cAAc;oBACpC,MAAM,OAAO,SAAS,oBAAoB;oBAC1C,MAAM,SACJ,QAAQ,KACJ,iBACA,QAAQ,KACR,gBACA;oBACN,qBACE,8OAAC;;;0CACC,8OAAC;0EAAc;0CAAyB,SAAS;;;;;;0CACjD,8OAAC;0EAAc;;oCAAiB;oCACvB;oCAAK;oCAAgB;oCAAK;;;;;;;0CAEnC,8OAAC;0EAAc;0CAAkB;;;;;;;;;;;;gBAGvC,CAAC;;;;;;0BAKL,8OAAC;0DAAc;;kCACb,8OAAC;kEAAc;;;;;;kCACf,8OAAC;wBAEC,OAAO;4BACL,WAAW,CAAC,OAAO,EAAE,MAAM,sBAAsB,CAAC;wBACpD;kEAHU;;;;;;;;;;;;0BAQd,8OAAC;0DAAc;;kCACb,8OAAC;kEAAc;kCAAgD;;;;;;kCAG/D,8OAAC;kEAAc;;0CACb,8OAAC;0EAAe;;;;;;4BAAqC;0CAAC,8OAAC;;0CAAK;;;;;;;;;;;;kCAE9D,8OAAC;kEAAc;;0CACb,8OAAC;0EAAe;;;;;;4BAAsC;0CAAC,8OAAC;;0CAAK;;;;;;;;;;;;kCAE/D,8OAAC;kEAAc;;0CACb,8OAAC;0EAAe;;;;;;4BAAoC;0CAAC,8OAAC;;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCrE","debugId":null}},
    {"offset": {"line": 413, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport GlobeView from \"@/components/GlobeView\";\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n\ntype IntelItem = {\n  id: number;\n  headline: string;\n  summary: string;\n  region: string;\n  sentiment_level: string | null;\n  impact_score: number;\n  confidence_score?: number;\n  access_level?: \"Public\" | \"Restricted\" | \"Containment\";\n  containment_reason?: string | null;\n  ai_confidence_score?: number | null;\n  ai_risk_flag?: string | null;\n  ai_verdict?: string | null;\n\n  // NEW\n  attachments?: string[] | null;\n  attn?: string | null;\n  anonymous?: boolean | null;\n\n  created_at: string;\n};\n\nexport default function Page() {\n  const [intelFeed, setIntelFeed] = useState<IntelItem[]>([]);\n  const [filteredFeed, setFilteredFeed] = useState<IntelItem[]>([]);\n  const [filterLevel, setFilterLevel] = useState<\"All\" | \"High\" | \"Medium\" | \"Low\">(\"All\");\n\n  const [restrictedCount, setRestrictedCount] = useState<number>(0);\n  const [containmentCount, setContainmentCount] = useState<number>(0);\n  const [lockedItems, setLockedItems] = useState<IntelItem[]>([]);\n  const [restrictedOpen, setRestrictedOpen] = useState<boolean>(false);\n\n  const [status, setStatus] = useState(\"üõ∞Ô∏è Connecting to Supabase...\");\n  const [sentimentStats, setSentimentStats] = useState({\n    positive: 0,\n    neutral: 0,\n    negative: 0,\n    unknown: 0,\n  });\n\n  // ---------- FORM STATE ----------\n  const [form, setForm] = useState({\n    headline: \"\",\n    summary: \"\",\n    region: \"\",\n    sentiment_level: \"Neutral\",\n    impact_score: 50,\n    access_level: \"Public\" as \"Public\" | \"Restricted\" | \"Containment\",\n    attn: \"General\",\n    attn_other: \"\",\n    anonymous: false,\n  });\n\n  // NEW: local file buffer\n  const [filesToUpload, setFilesToUpload] = useState<File[]>([]);\n\n  // ---------- HELPERS ----------\n  const updateSentimentStats = (newIntel: IntelItem) => {\n    const s = (newIntel.sentiment_level || \"\").toLowerCase();\n    setSentimentStats((prev) => ({\n      positive: prev.positive + (s.includes(\"positive\") ? 1 : 0),\n      neutral: prev.neutral + (s.includes(\"neutral\") ? 1 : 0),\n      negative: prev.negative + (s.includes(\"negative\") ? 1 : 0),\n      unknown:\n        prev.unknown +\n        (!s.includes(\"positive\") && !s.includes(\"neutral\") && !s.includes(\"negative\") ? 1 : 0),\n    }));\n  };\n\n  // ---------- LOAD INITIAL ----------\n  useEffect(() => {\n    const loadIntel = async () => {\n      const { data, error } = await supabase\n        .from(\"intel_feed\")\n        .select(\n          \"id,headline,summary,region,sentiment_level,impact_score,confidence_score,access_level,containment_reason,ai_confidence_score,ai_risk_flag,ai_verdict,attachments,attn,anonymous,created_at\"\n        )\n        .order(\"created_at\", { ascending: false })\n        .limit(20);\n\n      if (error) {\n        console.error(error);\n        setStatus(\"‚ùå Error loading feed\");\n        return;\n      }\n\n      const all = data || [];\n      const restricted = all.filter((i) => i.access_level === \"Restricted\");\n      const contained = all.filter((i) => i.access_level === \"Containment\");\n\n      setRestrictedCount(restricted.length);\n      setContainmentCount(contained.length);\n      setLockedItems([...restricted, ...contained]);\n\n      const safeFeed = all.filter((i) => i.access_level !== \"Containment\");\n      setIntelFeed(safeFeed);\n      setFilteredFeed(safeFeed);\n      setStatus(\"‚úÖ Live connection established\");\n    };\n    loadIntel();\n  }, []);\n\n  // ---------- CONFIDENCE FILTER ----------\n  useEffect(() => {\n    if (filterLevel === \"All\") {\n      setFilteredFeed(intelFeed);\n      return;\n    }\n    const filtered = intelFeed.filter((item) => {\n      const c = item.ai_confidence_score ?? item.confidence_score;\n      if (c === undefined || c === null) return false;\n      if (filterLevel === \"High\") return c >= 70;\n      if (filterLevel === \"Medium\") return c >= 40 && c < 70;\n      if (filterLevel === \"Low\") return c < 40;\n      return true;\n    });\n    setFilteredFeed(filtered);\n  }, [filterLevel, intelFeed]);\n\n  // ---------- REALTIME INSERTS ----------\n  useEffect(() => {\n    const channel = supabase\n      .channel(\"intel-feed-channel\")\n      .on(\n        \"postgres_changes\",\n        { event: \"INSERT\", schema: \"public\", table: \"intel_feed\" },\n        (payload) => {\n          const newIntel = payload.new as IntelItem;\n\n          if (newIntel.access_level === \"Containment\" || newIntel.access_level === \"Restricted\") {\n            setLockedItems((prev) => [newIntel, ...prev]);\n            if (newIntel.access_level === \"Containment\") setContainmentCount((c) => c + 1);\n            if (newIntel.access_level === \"Restricted\") setRestrictedCount((c) => c + 1);\n            if (newIntel.access_level === \"Containment\") return; // do not show in public feed\n          }\n\n          setIntelFeed((prev) => [newIntel, ...prev]);\n          updateSentimentStats(newIntel);\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, []);\n\n  // ---------- FILE HANDLERS ----------\n  const handleFilesChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const f = e.target.files;\n    if (!f) return;\n    const arr = Array.from(f);\n    setFilesToUpload(arr.slice(0, 6)); // max 6 files\n  };\n\n  async function uploadFilesToSupabase(files: File[]) {\n    if (!files || files.length === 0) return [];\n    const uploadedUrls: string[] = [];\n\n    for (const file of files) {\n      const safeName = file.name.replace(/\\s+/g, \"_\").replace(/[^\\w.-]/g, \"\");\n      const path = `intel_${Date.now()}_${Math.round(Math.random() * 1e6)}_${safeName}`;\n\n      const { error: upErr } = await supabase.storage\n        .from(\"intel-attachments\")\n        .upload(path, file, {\n          cacheControl: \"3600\",\n          upsert: false,\n        });\n\n      if (upErr) {\n        console.error(\"Upload error:\", upErr);\n        continue;\n      }\n\n      const { data: urlData } = supabase.storage.from(\"intel-attachments\").getPublicUrl(path);\n      if (urlData?.publicUrl) uploadedUrls.push(urlData.publicUrl);\n    }\n\n    return uploadedUrls;\n  }\n\n  // ---------- MODERATE (unchanged) ----------\n  const moderateIntel = async (\n    id: number,\n    access: \"Public\" | \"Restricted\" | \"Containment\",\n    reason?: string | null\n  ) => {\n    try {\n      const res = await fetch(\"/api/intel/moderate\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ id, access_level: access, containment_reason: reason ?? null }),\n      });\n      if (!res.ok) throw new Error(await res.text());\n\n      setLockedItems((prev) => prev.filter((i) => i.id !== id));\n      if (access === \"Public\") {\n        setRestrictedCount((c) => Math.max(0, c - 1));\n      } else if (access === \"Restricted\") {\n        setRestrictedCount((c) => c + 1);\n        setContainmentCount((c) => Math.max(0, c - 1));\n      } else if (access === \"Containment\") {\n        setContainmentCount((c) => c + 1);\n        setRestrictedCount((c) => Math.max(0, c - 1));\n      }\n\n      alert(\"‚úÖ Moderation saved.\");\n    } catch (err: any) {\n      alert(\"‚ùå Moderation failed: \" + err.message);\n    }\n  };\n\n  // ---------- SUBMIT (with auto-containment + attachments + attn + anonymous) ----------\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // auto-access rule based on sentiment & impact\n    const sentiment = form.sentiment_level.toLowerCase();\n    let autoAccess: \"Public\" | \"Restricted\" | \"Containment\" = \"Public\";\n    let reason: string | null = null;\n\n    if (form.impact_score >= 90 && sentiment === \"negative\") {\n      autoAccess = \"Containment\";\n      reason = \"High-impact negative intel automatically contained to prevent panic.\";\n    } else if (form.impact_score >= 75 && sentiment === \"negative\") {\n      autoAccess = \"Restricted\";\n      reason = \"Potentially destabilizing intel under verification review.\";\n    }\n\n    try {\n      setStatus(\"‚è≥ Uploading attachments & submitting intel...\");\n      const attachmentUrls = await uploadFilesToSupabase(filesToUpload);\n\n      const attnValue = form.attn === \"Other\" ? form.attn_other || \"Other\" : form.attn;\n\n      const payload: any = {\n        headline: form.headline,\n        summary: form.summary,\n        region: form.region,\n        sentiment_level: form.sentiment_level,\n        impact_score: form.impact_score,\n        access_level: autoAccess,\n        containment_reason: reason,\n        attachments: attachmentUrls,\n        attn: attnValue,\n        anonymous: !!form.anonymous,\n      };\n\n      const { data, error } = await supabase.from(\"intel_feed\").insert([payload]).select().single();\n\n      if (error) {\n        console.error(\"Insert error:\", error);\n        alert(\"‚ùå Error submitting intel: \" + error.message);\n        setStatus(\"‚ùå Error submitting intel\");\n        return;\n      }\n\n      // Trigger A.I.V.E. (best-effort)\n      try {\n        await fetch(\"/api/verify-intel\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            id: data.id,\n            headline: form.headline,\n            summary: form.summary,\n            region: form.region,\n          }),\n        });\n      } catch (err) {\n        console.warn(\"A.I.V.E. verification trigger failed:\", err);\n      }\n\n      // reset\n      setFilesToUpload([]);\n      setForm({\n        headline: \"\",\n        summary: \"\",\n        region: \"\",\n        sentiment_level: \"Neutral\",\n        impact_score: 50,\n        access_level: \"Public\",\n        attn: \"General\",\n        attn_other: \"\",\n        anonymous: false,\n      });\n\n      setStatus(\n        autoAccess === \"Containment\"\n          ? \"üö´ Intel auto-contained (hidden from public view).\"\n          : autoAccess === \"Restricted\"\n          ? \"üîí Intel restricted for verification.\"\n          : \"‚úÖ Intel submitted. A.I.V.E. is verifying.\"\n      );\n      alert(\n        autoAccess === \"Containment\"\n          ? \"üö´ Intel auto-contained (hidden from public view).\"\n          : autoAccess === \"Restricted\"\n          ? \"üîí Intel restricted for verification.\"\n          : \"‚úÖ Intel submitted. A.I.V.E. is verifying.\"\n      );\n    } catch (err: any) {\n      console.error(\"Submission failure:\", err);\n      alert(\"‚ùå Submission failed: \" + err.message);\n      setStatus(\"‚ùå Submission failed\");\n    }\n  };\n\n  const getAccessColor = (level?: string) => {\n    switch (level) {\n      case \"Restricted\":\n        return \"bg-blue-900/70 border-blue-500/40 text-blue-300\";\n      case \"Containment\":\n        return \"bg-red-900/70 border-red-500/40 text-red-400\";\n      default:\n        return \"\";\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen flex flex-col lg:flex-row items-center justify-between bg-gradient-to-br from-slate-900 via-gray-800 to-black text-white font-mono p-6\">\n      {/* LEFT PANEL */}\n      <div className=\"w-full lg:w-1/2 max-w-xl space-y-4\">\n        <h1 className=\"text-3xl font-bold text-blue-400 mb-2 text-center\">\n          eX Intelligence Command Center\n        </h1>\n        <p className=\"text-gray-400 text-center mb-3\">{status}</p>\n\n        {(containmentCount > 0 || restrictedCount > 0) && (\n          <div className=\"text-xs text-center mb-2\">\n            <span className=\"text-red-400\">üß© {containmentCount} containment</span>\n            <span className=\"text-slate-500\"> ‚Ä¢ </span>\n            <span className=\"text-blue-300\">üîí {restrictedCount} restricted</span>\n          </div>\n        )}\n\n        {/* Filter + Restricted */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex gap-3 text-sm\">\n            {[\"All\", \"High\", \"Medium\", \"Low\"].map((level) => (\n              <button\n                key={level}\n                onClick={() => setFilterLevel(level as any)}\n                className={`px-3 py-1 rounded-lg border transition-all duration-200 ${\n                  filterLevel === level\n                    ? \"bg-blue-600 border-blue-400 text-white\"\n                    : \"bg-slate-800 border-slate-700 text-blue-300 hover:border-blue-400\"\n                }`}\n              >\n                {level}\n              </button>\n            ))}\n          </div>\n\n          <button\n            onClick={() => setRestrictedOpen(true)}\n            className=\"text-xs bg-slate-800 border border-slate-700 hover:border-blue-400 text-blue-300 px-3 py-1 rounded-lg\"\n            title=\"View restricted/contained items\"\n          >\n            üõ°Ô∏è Restricted {containmentCount + restrictedCount}\n          </button>\n        </div>\n\n        {/* FEED */}\n        {filteredFeed.map((item) => (\n          <div\n            key={item.id}\n            className={`relative bg-slate-800/60 backdrop-blur-md border border-slate-700 p-4 rounded-xl shadow-md animate-fade-in overflow-hidden ${getAccessColor(\n              item.access_level\n            )}`}\n          >\n            {/* overlay for Restricted */}\n            {item.access_level === \"Restricted\" && (\n              <div className=\"absolute inset-0 bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center text-center p-4 rounded-xl border border-blue-500/40\">\n                <span className=\"text-3xl mb-2\">üîí</span>\n                <p className=\"text-sm text-blue-300\">Access Restricted ‚Äî Pending Verification</p>\n                {item.containment_reason && (\n                  <p className=\"text-xs text-slate-400 mt-2 italic\">{item.containment_reason}</p>\n                )}\n              </div>\n            )}\n\n            <h2 className=\"text-lg font-semibold text-blue-300\">{item.headline}</h2>\n            <p className=\"text-gray-400 text-sm mt-1\">{item.summary}</p>\n\n            {/* Attachments preview */}\n            {!!item.attachments?.length && (\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                {item.attachments.map((url, i) =>\n                  url.match(/\\.(mp3|wav|m4a|ogg)$/i) ? (\n                    <audio key={i} src={url} controls className=\"w-full max-w-xs\" />\n                  ) : (\n                    <a\n                      key={i}\n                      href={url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"block\"\n                      title=\"Open attachment\"\n                    >\n                      <img\n                        src={url}\n                        alt=\"attachment\"\n                        className=\"h-20 w-28 object-cover rounded-md border border-slate-700\"\n                      />\n                    </a>\n                  )\n                )}\n              </div>\n            )}\n\n            <div className=\"flex justify-between text-xs text-gray-400 mt-2 items-center\">\n              <span>üåç {item.region}</span>\n              <div className=\"flex items-center gap-2\">\n                <span>üí• {item.impact_score}</span>\n                <span>üß≠ {item.sentiment_level || \"Unknown\"}</span>\n                {item.attn && <span className=\"px-2 py-0.5 rounded bg-slate-700/70\">ATTN: {item.attn}</span>}\n              </div>\n            </div>\n\n            {/* A.I.V.E. display */}\n            {(item.ai_confidence_score !== null && item.ai_confidence_score !== undefined) && (\n              <div\n                className={`mt-2 text-xs ${\n                  item.ai_confidence_score >= 70\n                    ? \"text-emerald-400\"\n                    : item.ai_confidence_score >= 40\n                    ? \"text-yellow-300\"\n                    : \"text-red-400\"\n                }`}\n              >\n                üß† A.I.V.E. Confidence: {item.ai_confidence_score}%\n              </div>\n            )}\n            {item.ai_risk_flag === \"Contradictory\" && (\n              <div className=\"mt-1 text-xs text-red-400\">‚ö†Ô∏è Contradictory intel detected</div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* RIGHT PANEL: GlobeView */}\n      <div className=\"w-full lg:w-1/2 flex flex-col items-center\">\n        <div className=\"h-[500px] w-full flex justify-center\">\n          <GlobeView width={480} height={480} />\n        </div>\n{/* üåç Country Navigation */}\n<div className=\"mt-6 w-full flex flex-wrap justify-center gap-2 max-w-sm\">\n  {[\n    \"United States\",\n    \"China\",\n    \"India\",\n    \"Russia\",\n    \"Brazil\",\n    \"Germany\",\n    \"France\",\n    \"Mexico\",\n    \"Saudi Arabia\",\n    \"Canada\",\n    \"Australia\",\n  ].map((country) => (\n    <button\n      key={country}\n      onClick={() =>\n        (window.location.href = `/intel/${country.toLowerCase().replace(/\\s+/g, \"-\")}`)\n      }\n      className=\"bg-slate-800/80 border border-slate-700 hover:border-blue-400 text-blue-300 hover:text-white px-3 py-1 rounded-lg text-sm transition-all duration-200\"\n    >\n      {country}\n    </button>\n  ))}\n</div>\n\n        {/* Country links remain inside Globe elsewhere; no changes here */}\n\n        {/* FORM */}\n        <form\n          onSubmit={handleSubmit}\n          className=\"mt-8 bg-slate-800/80 border border-slate-700 rounded-lg p-4 w-full max-w-md space-y-3\"\n        >\n          <h2 className=\"text-lg text-blue-300 font-semibold text-center\">üß† Add New Intel</h2>\n\n          <input\n            type=\"text\"\n            placeholder=\"Headline\"\n            className=\"w-full p-2 rounded bg-slate-700 text-white\"\n            value={form.headline}\n            onChange={(e) => setForm({ ...form, headline: e.target.value })}\n            required\n          />\n\n          <textarea\n            placeholder=\"Summary\"\n            className=\"w-full p-2 rounded bg-slate-700 text-white\"\n            rows={2}\n            value={form.summary}\n            onChange={(e) => setForm({ ...form, summary: e.target.value })}\n            required\n          />\n\n          <input\n            type=\"text\"\n            placeholder=\"Region (e.g., Canada)\"\n            className=\"w-full p-2 rounded bg-slate-700 text-white\"\n            value={form.region}\n            onChange={(e) => setForm({ ...form, region: e.target.value })}\n            required\n          />\n\n          <div className=\"flex justify-between space-x-2\">\n            <select\n              className=\"w-1/2 p-2 rounded bg-slate-700 text-white\"\n              value={form.sentiment_level}\n              onChange={(e) => setForm({ ...form, sentiment_level: e.target.value })}\n            >\n              <option value=\"Positive\">Positive</option>\n              <option value=\"Neutral\">Neutral</option>\n              <option value=\"Negative\">Negative</option>\n            </select>\n\n            <input\n              type=\"number\"\n              placeholder=\"Impact Score\"\n              min={0}\n              max={100}\n              className=\"w-1/2 p-2 rounded bg-slate-700 text-white\"\n              value={form.impact_score}\n              onChange={(e) => setForm({ ...form, impact_score: parseInt(e.target.value) || 0 })}\n            />\n          </div>\n\n          {/* ATTACHMENTS */}\n          <div className=\"text-xs text-slate-400\">Attach images or audio (optional)</div>\n          <input\n            type=\"file\"\n            accept=\"image/*,audio/*\"\n            multiple\n            onChange={handleFilesChange}\n            className=\"w-full text-sm text-slate-300\"\n          />\n\n          {/* ATTN */}\n          <div className=\"flex flex-wrap gap-2 items-center\">\n            <label className=\"text-xs text-slate-300\">Attn</label>\n            <select\n              className=\"p-2 rounded bg-slate-700 text-white text-sm\"\n              value={form.attn}\n              onChange={(e) => setForm({ ...form, attn: e.target.value })}\n            >\n              <option value=\"General\">General</option>\n              <option value=\"FBI\">FBI</option>\n              <option value=\"DEA\">DEA</option>\n              <option value=\"LocalPolice\">Local Police</option>\n              <option value=\"Other\">Other (specify)</option>\n            </select>\n            {form.attn === \"Other\" && (\n              <input\n                type=\"text\"\n                className=\"p-2 rounded bg-slate-700 text-white text-sm\"\n                placeholder=\"Type agency or email\"\n                value={form.attn_other}\n                onChange={(e) => setForm({ ...form, attn_other: e.target.value })}\n              />\n            )}\n          </div>\n\n          {/* ANONYMOUS */}\n          <div className=\"flex items-center gap-2 text-xs text-slate-300\">\n            <input\n              id=\"anon\"\n              type=\"checkbox\"\n              checked={form.anonymous}\n              onChange={(e) => setForm({ ...form, anonymous: e.target.checked })}\n            />\n            <label htmlFor=\"anon\">Submit anonymously (we will not store optional identifiers)</label>\n          </div>\n\n          <button\n            type=\"submit\"\n            className=\"w-full bg-blue-600 hover:bg-blue-700 rounded-lg py-2 font-semibold\"\n          >\n            üöÄ Submit Intel\n          </button>\n        </form>\n      </div>\n\n      {/* RESTRICTED MODAL */}\n      {restrictedOpen && (\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\">\n          <div className=\"w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-xl p-5\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-lg font-semibold text-blue-300\">üõ°Ô∏è Restricted Intel Panel</h3>\n              <button\n                onClick={() => setRestrictedOpen(false)}\n                className=\"text-sm px-3 py-1 rounded-md border border-slate-700 hover:border-blue-400\"\n              >\n                Close\n              </button>\n            </div>\n\n            {lockedItems.length === 0 ? (\n              <div className=\"text-sm text-slate-400\">No restricted or contained reports.</div>\n            ) : (\n              <div className=\"space-y-3 max-h-[60vh] overflow-auto pr-1\">\n                {lockedItems.map((it) => (\n                  <div key={it.id} className=\"border border-slate-700 rounded-lg p-3 bg-slate-800/60\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"text-sm font-semibold text-blue-200\">{it.headline}</div>\n                      <span\n                        className={`text-xs px-2 py-0.5 rounded ${\n                          it.access_level === \"Containment\"\n                            ? \"bg-red-500/20 text-red-300\"\n                            : \"bg-blue-500/20 text-blue-300\"\n                        }`}\n                      >\n                        {it.access_level}\n                      </span>\n                    </div>\n                    <div className=\"text-xs text-slate-400 mt-1\">\n                      üåç {it.region} ‚Ä¢ üí• {it.impact_score} ‚Ä¢ üß≠ {it.sentiment_level || \"Unknown\"}\n                    </div>\n                    {it.containment_reason && (\n                      <div className=\"text-xs text-slate-500 mt-1 italic\">{it.containment_reason}</div>\n                    )}\n\n                    <div className=\"flex gap-2 mt-3\">\n                      <button\n                        onClick={() => moderateIntel(it.id, \"Public\", null)}\n                        className=\"text-xs px-3 py-1 rounded border border-emerald-500/40 hover:bg-emerald-600/20\"\n                        title=\"Release to public feed\"\n                      >\n                        ‚úÖ Release\n                      </button>\n                      <button\n                        onClick={() => moderateIntel(it.id, \"Restricted\", \"Kept under verification.\")}\n                        className=\"text-xs px-3 py-1 rounded border border-blue-500/40 hover:bg-blue-600/20\"\n                        title=\"Keep locked (restricted)\"\n                      >\n                        üîí Keep Restricted\n                      </button>\n                      <button\n                        onClick={() => moderateIntel(it.id, \"Containment\", \"Contained after review.\")}\n                        className=\"text-xs px-3 py-1 rounded border border-red-500/40 hover:bg-red-600/20\"\n                        title=\"Escalate to containment\"\n                      >\n                        üö´ Contain\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      <style jsx global>{`\n        @keyframes fade-in {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .animate-fade-in { animation: fade-in 0.5s ease-in-out; }\n      `}</style>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}