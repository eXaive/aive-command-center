{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport { motion } from \"framer-motion\";\nimport dynamic from \"next/dynamic\";\nimport { toast } from \"react-hot-toast\";\n\nconst Globe = dynamic(() => import(\"react-globe.gl\"), { ssr: false });\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n\nexport default function IntelligenceCommandCenter() {\n  // üß† STATE\n  const [intelFeed, setIntelFeed] = useState([]);\n  const [headline, setHeadline] = useState(\"\");\n  const [summary, setSummary] = useState(\"\");\n  const [region, setRegion] = useState(\"\");\n  const [sentiment, setSentiment] = useState(\"Neutral\");\n  const [impact, setImpact] = useState(50);\n  const [files, setFiles] = useState<FileList | null>(null);\n  const [attn, setAttn] = useState(\"General\");\n  const [anonymous, setAnonymous] = useState(false);\n  const [loading, setLoading] = useState(false); // ‚úÖ FIXED missing state\n\n  // üåç Load feed\n  useEffect(() => {\n    fetchIntelFeed();\n  }, []);\n\n  async function fetchIntelFeed() {\n    const { data, error } = await supabase\n      .from(\"intel_feed\")\n      .select(\"*\")\n      .order(\"created_at\", { ascending: false });\n    if (error) console.error(error);\n    else setIntelFeed(data || []);\n  }\n\n  // üöÄ Submit Intel\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!headline.trim() || !summary.trim()) {\n      toast.error(\"Please add a headline and summary before submitting.\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const intel = {\n        headline,\n        summary,\n        region,\n        sentiment_level: sentiment,\n        impact_score: impact,\n        attn,\n        anonymous,\n      };\n\n      const aiveResponse = await fetch(\n        `${process.env.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/aive-analyze-intel`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            apikey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n          },\n          body: JSON.stringify(intel),\n        }\n      );\n\n      const aiResult = await aiveResponse.json();\n\n      const enrichedIntel = {\n        ...intel,\n        confidence_score: aiResult.confidence_score ?? 50,\n        risk_level: aiResult.risk_level ?? \"Uncertain\",\n        verdict: aiResult.verdict ?? \"Unknown\",\n        rationale: aiResult.rationale ?? \"No explanation.\",\n        created_at: new Date().toISOString(),\n      };\n\n      const { error } = await supabase.from(\"intel_feed\").insert([enrichedIntel]);\n      if (error) throw error;\n\n      toast.success(\"Intel verified & submitted ‚úÖ\");\n      setHeadline(\"\");\n      setSummary(\"\");\n      setRegion(\"\");\n      setImpact(50);\n      setSentiment(\"Neutral\");\n      setAttn(\"General\");\n      setAnonymous(false);\n      fetchIntelFeed();\n    } catch (err) {\n      console.error(err);\n      toast.error(\"Error submitting intel ‚ùå\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // üåê Globe setup\n  const globeConfig = {\n    globeImageUrl: \"//unpkg.com/three-globe/example/img/earth-dark.jpg\",\n    bumpImageUrl: \"//unpkg.com/three-globe/example/img/earth-topology.png\",\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 flex flex-col md:flex-row p-6 gap-6\">\n      {/* LEFT PANEL */}\n      <section className=\"flex-1\">\n        <h1 className=\"text-xl font-bold text-blue-400 mb-2\">\n          eX Intelligence Command Center\n        </h1>\n        <p className=\"text-green-400 mb-4 flex items-center\">\n          ‚úÖ Live connection established\n        </p>\n\n        {/* FILTERS */}\n        <div className=\"flex gap-2 mb-4\">\n          {[\"All\", \"High\", \"Medium\", \"Low\", \"Restricted\"].map((f) => (\n            <button\n              key={f}\n              className=\"px-3 py-1 rounded bg-slate-800 hover:bg-slate-700 text-sm border border-slate-600\"\n            >\n              {f}\n            </button>\n          ))}\n        </div>\n\n        {/* FEED */}\n        <div className=\"space-y-3 overflow-y-auto h-[80vh] pr-2\">\n          {intelFeed.map((item, i) => (\n            <motion.div\n              key={i}\n              whileHover={{ scale: 1.02 }}\n              className=\"p-4 rounded-xl bg-slate-800/60 border border-slate-700\"\n            >\n              <h2 className=\"text-slate-100 font-semibold\">‚Äú{item.headline}‚Äù</h2>\n              <p className=\"text-slate-400 text-sm\">{item.summary}</p>\n              <p className=\"text-xs text-slate-500 mt-1\">\n                üåç {item.region || \"Global\"} ‚Ä¢ üß† {item.sentiment_level} ‚Ä¢ ‚ö° Impact {item.impact_score}\n              </p>\n\n              {/* üß† A.I.V.E. Section */}\n              <div className=\"mt-3 border-t border-slate-700 pt-2 text-sm\">\n                <p>\n                  <span className=\"text-yellow-400\">Verdict:</span>{\" \"}\n                  {item.verdict || \"Pending\"}\n                </p>\n                <p>\n                  <span className=\"text-blue-400\">Confidence:</span>{\" \"}\n                  {item.confidence_score\n                    ? `${item.confidence_score}%`\n                    : \"N/A\"}\n                </p>\n                <p>\n                  <span className=\"text-red-400\">Risk:</span>{\" \"}\n                  {item.risk_level || \"Unrated\"}\n                </p>\n                <p className=\"text-slate-500 italic\">\n                  ‚Äú{item.rationale || \"Awaiting analysis...\"}‚Äù\n                </p>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      </section>\n\n      {/* RIGHT PANEL */}\n      <section className=\"flex flex-col items-center justify-start w-full md:w-[45%] space-y-6\">\n        {/* GLOBE */}\n        <div className=\"relative\">\n          <Globe\n            height={350}\n            width={350}\n            {...globeConfig}\n            animateIn\n            backgroundColor=\"rgba(0,0,0,0)\"\n            autoRotate={true}\n            autoRotateSpeed={0.7}\n          />\n        </div>\n\n        {/* SENTIMENT COUNTERS */}\n        <div className=\"flex gap-4 text-sm\">\n          <span className=\"text-green-400\">‚óè Positive: 0</span>\n          <span className=\"text-yellow-400\">‚óè Neutral: 0</span>\n          <span className=\"text-red-400\">‚óè Negative: 0</span>\n          <span className=\"text-gray-400\">‚óè Unknown: 0</span>\n        </div>\n\n        {/* SUBMIT FORM */}\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-slate-900/60 border border-slate-700 p-4 rounded-2xl w-full max-w-md shadow-xl\"\n        >\n          <h3 className=\"font-semibold text-slate-100 mb-2\">\n            üß† Add New Intel\n          </h3>\n\n          <input\n            type=\"text\"\n            placeholder=\"Headline\"\n            value={headline}\n            onChange={(e) => setHeadline(e.target.value)}\n            className=\"w-full mb-2 p-2 rounded bg-slate-800 border border-slate-700 text-slate-200\"\n          />\n\n          <textarea\n            placeholder=\"Summary\"\n            value={summary}\n            onChange={(e) => setSummary(e.target.value)}\n            className=\"w-full mb-2 p-2 rounded bg-slate-800 border border-slate-700 text-slate-200\"\n            rows={3}\n          />\n\n          <input\n            type=\"text\"\n            placeholder=\"Region (e.g., Canada)\"\n            value={region}\n            onChange={(e) => setRegion(e.target.value)}\n            className=\"w-full mb-2 p-2 rounded bg-slate-800 border border-slate-700 text-slate-200\"\n          />\n\n          <div className=\"flex gap-2 mb-2\">\n            <select\n              value={sentiment}\n              onChange={(e) => setSentiment(e.target.value)}\n              className=\"flex-1 p-2 rounded bg-slate-800 border border-slate-700 text-slate-200\"\n            >\n              <option>Positive</option>\n              <option>Neutral</option>\n              <option>Negative</option>\n            </select>\n\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"100\"\n              value={impact}\n              onChange={(e) => setImpact(Number(e.target.value))}\n              className=\"w-20 p-2 rounded bg-slate-800 border border-slate-700 text-center text-slate-200\"\n            />\n          </div>\n\n          {/* Attachments */}\n          <label className=\"block text-xs text-slate-400 mb-1\">\n            Attach images or audio (optional)\n          </label>\n          <input\n            type=\"file\"\n            multiple\n            onChange={(e) => setFiles(e.target.files)}\n            className=\"w-full mb-3 text-xs text-slate-400\"\n          />\n\n          {/* Attn Line */}\n          <label className=\"block text-xs text-slate-400 mb-1\">Attn:</label>\n          <select\n            value={attn}\n            onChange={(e) => setAttn(e.target.value)}\n            className=\"w-full mb-2 p-2 rounded bg-slate-800 border border-slate-700 text-slate-200\"\n          >\n            <option>General</option>\n            <option>FBI</option>\n            <option>DEA</option>\n            <option>Interpol</option>\n            <option>Homeland Security</option>\n            <option>Other</option>\n          </select>\n\n          {/* Anonymous checkbox */}\n          <label className=\"flex items-center text-xs text-slate-400 gap-2 mb-3\">\n            <input\n              type=\"checkbox\"\n              checked={anonymous}\n              onChange={(e) => setAnonymous(e.target.checked)}\n            />\n            Submit anonymously (no optional identifiers stored)\n          </label>\n\n          <motion.button\n            type=\"submit\"\n            disabled={loading}\n            whileTap={{ scale: 0.98 }}\n            animate={\n              loading\n                ? { boxShadow: [\"0 0 10px gold\", \"0 0 20px #3b82f6\", \"0 0 10px gold\"] }\n                : {}\n            }\n            transition={{ repeat: loading ? Infinity : 0, duration: 1.5 }}\n            className={`w-full py-2 rounded-lg text-white font-semibold transition-all ${\n              loading\n                ? \"bg-gradient-to-r from-yellow-500 to-blue-600\"\n                : \"bg-blue-600 hover:bg-blue-700\"\n            }`}\n          >\n            {loading ? \"üß† A.I.V.E. Analyzing...\" : \"üöÄ Submit Intel\"}\n          </motion.button>\n\n          {loading && (\n            <p className=\"text-xs text-slate-400 mt-2 text-center animate-pulse\">\n              A.I.V.E. is analyzing submission...\n            </p>\n          )}\n        </form>\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}