{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/GMMF/gmmf_donut_nextjs/app/intel/%5Bcountry%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\n\r\ninterface NewsItem {\r\n  title: string;\r\n  link: string;\r\n  pubDate?: string;\r\n  source?: string;\r\n}\r\n\r\n/* --- G20 COUNTRY MAPS --- */\r\nconst COUNTRY_NAME_MAP: Record<string, string> = {\r\n  US: \"United States\",\r\n  CN: \"China\",\r\n  JP: \"Japan\",\r\n  DE: \"Germany\",\r\n  IN: \"India\",\r\n  GB: \"United Kingdom\",\r\n  FR: \"France\",\r\n  BR: \"Brazil\",\r\n  IT: \"Italy\",\r\n  CA: \"Canada\",\r\n  RU: \"Russia\",\r\n  AU: \"Australia\",\r\n  KR: \"South Korea\",\r\n  SA: \"Saudi Arabia\",\r\n  MX: \"Mexico\",\r\n  ID: \"Indonesia\",\r\n  ZA: \"South Africa\",\r\n  AR: \"Argentina\",\r\n  TR: \"Turkey\",\r\n  EU: \"European Union\",\r\n};\r\n\r\nconst COUNTRY_CODE_MAP: Record<string, string> = {\r\n  US: \"us\", USA: \"us\",\r\n  CN: \"cn\", CHN: \"cn\",\r\n  JP: \"jp\", JPN: \"jp\",\r\n  DE: \"de\", DEU: \"de\",\r\n  IN: \"in\", IND: \"in\",\r\n  GB: \"gb\", UK: \"gb\",\r\n  FR: \"fr\", FRA: \"fr\",\r\n  BR: \"br\", BRA: \"br\",\r\n  IT: \"it\", ITA: \"it\",\r\n  CA: \"ca\", CAN: \"ca\",\r\n  RU: \"ru\", RUS: \"ru\",\r\n  AU: \"au\", AUS: \"au\",\r\n  KR: \"kr\", KOR: \"kr\",\r\n  SA: \"sa\", SAU: \"sa\",\r\n  MX: \"mx\", MEX: \"mx\",\r\n  ID: \"id\", IDN: \"id\",\r\n  ZA: \"za\", ZAF: \"za\",\r\n  AR: \"ar\", ARG: \"ar\",\r\n  TR: \"tr\", TUR: \"tr\",\r\n  EU: \"eu\",\r\n};\r\n\r\nexport default function CountryIntelPage() {\r\n  const { country } = useParams() as { country: string };\r\n  const router = useRouter();\r\n\r\n  const [news, setNews] = useState<NewsItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [sentiment, setSentiment] = useState<number>(50);\r\n\r\n  const code = COUNTRY_CODE_MAP[country?.toUpperCase() || \"US\"] || \"us\";\r\n  const countryName = COUNTRY_NAME_MAP[country?.toUpperCase()] || country?.toUpperCase();\r\n  const flagUrl = `https://flagcdn.com/48x36/${code}.png`;\r\n\r\n  /* --- Fetch country intelligence --- */\r\n  useEffect(() => {\r\n    if (!country) return;\r\n    async function load() {\r\n      try {\r\n        setLoading(true);\r\n        const res = await fetch(`/api/news?region=${country}`);\r\n        const data = await res.json();\r\n        setNews(data.items || []);\r\n        setSentiment(Math.floor(Math.random() * 100));\r\n      } catch (err) {\r\n        console.error(\"‚ùå Failed to load country news\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n  }, [country]);\r\n\r\n  /* --- Sentiment visual logic --- */\r\n  const sentimentColor =\r\n    sentiment > 70 ? \"text-red-600\" : sentiment > 50 ? \"text-amber-500\" : \"text-blue-600\";\r\n  const sentimentText =\r\n    sentiment > 70 ? \"‚ö†Ô∏è High Risk\" : sentiment > 50 ? \"üü° Moderate\" : \"üü¶ Stable\";\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-slate-50 text-slate-800 p-8\">\r\n      <div className=\"max-w-5xl mx-auto\">\r\n        <button\r\n          onClick={() => router.push(\"/\")}\r\n          className=\"text-sm text-blue-600 hover:underline mb-4\"\r\n        >\r\n          ‚Üê Back to Dashboard\r\n        </button>\r\n\r\n        {/* === Header Card === */}\r\n        <div className=\"flex items-center justify-between bg-white rounded-xl border shadow-sm p-5 mb-8\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Image\r\n              src={flagUrl}\r\n              alt={countryName}\r\n              width={64}\r\n              height={48}\r\n              className=\"rounded-sm border bg-slate-100\"\r\n              unoptimized\r\n            />\r\n            <div>\r\n              <h1 className=\"text-xl font-semibold\">{countryName}</h1>\r\n              <p className=\"text-sm text-slate-500\">Regional financial intelligence profile</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <div className={`text-xl font-bold ${sentimentColor}`}>\r\n              {sentiment} / 100\r\n            </div>\r\n            <div className={`text-sm ${sentimentColor}`}>{sentimentText}</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* === News Feed === */}\r\n        <h2 className=\"text-lg font-semibold mb-3\">üì∞ Latest News & Insights</h2>\r\n\r\n        {loading ? (\r\n          <div className=\"text-slate-500\">Loading news...</div>\r\n        ) : news.length === 0 ? (\r\n          <div className=\"text-slate-500\">\r\n            No recent articles found for {countryName}.\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {news.map((item, i) => (\r\n              <a\r\n                key={i}\r\n                href={item.link}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"block border rounded-lg p-3 bg-white hover:bg-slate-50 transition\"\r\n              >\r\n                <div className=\"text-sm font-medium text-slate-900\">\r\n                  {item.title}\r\n                </div>\r\n                <div className=\"text-xs text-slate-500 mt-1\">\r\n                  {item.source && <span>{item.source}</span>}{\" \"}\r\n                  {item.pubDate && (\r\n                    <span>‚Ä¢ {new Date(item.pubDate).toLocaleDateString()}</span>\r\n                  )}\r\n                </div>\r\n              </a>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}