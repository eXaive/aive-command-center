(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},25241,e=>{"use strict";var t=e.i(43476),s=e.i(71645),i=e.i(18566);function l({item:e}){var s;let i=e.image&&!e.isFavicon?e.image:"/crowned_x.svg",l=e.pubDate?new Date(e.pubDate).toLocaleString():void 0;return(0,t.jsx)("a",{href:e.link||"#",target:"_blank",rel:"noreferrer",className:"group rounded-xl border bg-white overflow-hidden hover:shadow-sm transition",title:e.title,children:(0,t.jsxs)("div",{className:"flex gap-0",children:[(0,t.jsx)("div",{className:"w-40 h-28 bg-slate-100 flex-shrink-0 overflow-hidden",children:(0,t.jsx)("img",{src:i,alt:"",className:"w-full h-full object-cover group-hover:scale-[1.03] transition"})}),(0,t.jsxs)("div",{className:"flex-1 p-3 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"inline-flex h-5 min-w-[38px] items-center justify-center rounded-full px-2 text-[11px] font-semibold border "+((s=e.sentiment||0)>=.1?"bg-blue-100 text-blue-700 border-blue-200":s<=-.1?"bg-red-100 text-red-700 border-red-200":"bg-slate-100 text-slate-700 border-slate-200"),title:`Sentiment ${e.sentiment?.toFixed?.(2)??"0.00"}`,children:(e.sentiment??0).toFixed(1)}),(0,t.jsx)("div",{className:"text-[11px] text-slate-500",children:function(e){try{if(!e)return"";return new URL(e).hostname.replace(/^www\./,"")}catch{return""}}(e.link)})]}),(0,t.jsx)("h3",{className:"mt-1 font-semibold text-slate-900 line-clamp-2",children:e.title}),e.summary&&(0,t.jsx)("p",{className:"text-sm text-slate-600 mt-1 line-clamp-2",children:e.summary}),(0,t.jsx)("div",{className:"text-[11px] text-slate-500 mt-1",children:l})]})]})})}let a={geopolitics:{title:"Geopolitics",q:"geopolitics"},energy:{title:"Energy",q:"energy oil OPEC"},"tech-ai":{title:"Technology & AI",q:"technology AI chips"},climate:{title:"Climate",q:"climate emissions carbon"},elections:{title:"Elections",q:"election politics vote"},"btc-flows":{title:"BTC Flows",q:"bitcoin flow ETF"},"supply-chains":{title:"Supply Chains",q:"supply chain shipping"},deglobalization:{title:"Globalization/Deglobalization",q:"deglobalization trade"},demographics:{title:"Demographics",q:"population aging immigration"},housing:{title:"Housing",q:"housing mortgage"},regulation:{title:"Regulation",q:"regulation policy"},"fx-dollar":{title:"FX & Dollar",q:"DXY dollar FX"},rates:{title:"Central Bank Rates / FOMC",q:"FOMC interest rates yields"},liquidity:{title:"Liquidity",q:"liquidity market plumbing"},credit:{title:"Credit",q:"credit spreads HY IG"},gdp:{title:"GDP / Growth",q:"GDP growth PMI"},sentiment:{title:"Sentiment",q:"market sentiment fear greed"},dxy:{title:"DXY",q:"US dollar DXY"},cpi:{title:"CPI / Inflation",q:"CPI inflation PCE"},payrolls:{title:"Payrolls / Jobs",q:"payrolls nfp unemployment"},inflation:{title:"Inflation (General)",q:"inflation prices"},oil:{title:"Oil",q:"oil crude brent wti"},"news-tone":{title:"News Tone",q:"markets news"},equities:{title:"Equities",q:"stocks equities"},volatility:{title:"Volatility / Crash Watch",q:"volatility VIX crash"},positioning:{title:"Positioning",q:"CTAs hedge funds positioning"}};function n({values:e}){if(!e.length)return null;let s=Math.min(...e,0),i=Math.max(...e,0)-s||1,l=e.map((t,l)=>{let a=6+208*l/Math.max(e.length-1,1);return`${l?"L":"M"}${a},${46-(t-s)*40/i}`}).join(" ");return(0,t.jsxs)("svg",{width:220,height:52,className:"text-blue-600",children:[(0,t.jsx)("rect",{x:0,y:0,width:220,height:52,fill:"white"}),(0,t.jsx)("path",{d:l,fill:"none",stroke:"currentColor",strokeWidth:2})]})}function r({params:e}){let r=(0,i.useRouter)(),o=(0,i.useSearchParams)(),d=e.slug,c=a[d]||{title:d},m=(o.get("asset")||"GOLD").toUpperCase(),x=(o.get("region")||"ALL").toUpperCase(),h=o.get("date")||new Date().toISOString().slice(0,10),[u,p]=s.useState([]),[g,b]=s.useState(!1),[f,j]=s.useState(null),[v,y]=s.useState(c.q||"");s.useEffect(()=>{let e=!0;b(!0),j(null);let t=new URLSearchParams;return t.set("asset",m),v&&t.set("q",v),fetch(`/api/news?${t.toString()}`).then(async e=>{if(!e.ok)throw Error(`${e.status}`);return e.json()}).then(t=>{e&&p(t.items||[])}).catch(t=>e&&j(t?.message||"Failed to load")).finally(()=>e&&b(!1)),()=>{e=!1}},[m,v]);let N=s.useMemo(()=>{if(!u.length)return{avg:0,min:0,max:0,series:[]};let e=u.map(e=>Number(e.sentiment||0));return{avg:e.reduce((e,t)=>e+t,0)/e.length,min:Math.min(...e),max:Math.max(...e),series:e.slice(0,30).reverse()}},[u]);return(0,t.jsx)("main",{className:"min-h-screen bg-slate-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-6 pt-6 pb-16",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:(0,t.jsx)("button",{onClick:()=>r.push(`/?asset=${encodeURIComponent(m)}`),className:"underline underline-offset-2 hover:text-slate-700",children:"← Home"})}),(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:c.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("span",{className:"px-2 py-1 rounded-md bg-slate-900 text-white text-sm font-semibold",children:m}),(0,t.jsxs)("span",{className:"px-2 py-1 rounded-md border text-sm text-slate-700",children:["Region: ",x]}),(0,t.jsxs)("span",{className:"px-2 py-1 rounded-md border text-sm text-slate-700",children:["Date: ",h]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>r.push(`/focus?asset=${encodeURIComponent(m)}&topic=${encodeURIComponent(d)}`),className:"px-3 py-2 rounded-md border bg-white hover:bg-slate-50 text-sm",children:"Breakdown"}),(0,t.jsx)("a",{href:`/api/brief/topic?topic=${encodeURIComponent(d)}&asset=${encodeURIComponent(m)}&date=${encodeURIComponent(h)}`,className:"px-3 py-2 rounded-md border bg-white hover:bg-slate-50 text-sm",title:"Download PDF summary",children:"Summary (PDF)"})]})]}),(0,t.jsx)("div",{className:"mt-4 rounded-xl border bg-white p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"text-sm text-slate-700",children:"Filter:"}),(0,t.jsx)("input",{value:v,onChange:e=>y(e.target.value),placeholder:"keywords (e.g., inflation OPEC chip)",className:"px-3 py-1.5 rounded-md border text-sm",style:{minWidth:260}}),(0,t.jsx)("button",{onClick:()=>y(c.q||""),className:"px-2 py-1 rounded-md border text-sm hover:bg-slate-50",title:"Reset to default",children:"Reset"})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-xs text-slate-500",children:["Avg: ",(0,t.jsx)("b",{children:N.avg.toFixed(2)})," • Min: ",N.min.toFixed(2)," • Max: ",N.max.toFixed(2)]}),(0,t.jsx)(n,{values:N.series})]})]})}),(0,t.jsxs)("div",{className:"mt-4",children:[g&&(0,t.jsx)("div",{className:"text-sm text-slate-600",children:"Loading…"}),f&&!g&&(0,t.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:["Error: ",f]}),!g&&!f&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:u.map((e,s)=>(0,t.jsx)(l,{item:e},s))}),!g&&!f&&0===u.length&&(0,t.jsx)("div",{className:"text-sm text-slate-600",children:"No results found for this filter."})]})]})})}e.s(["default",()=>r],25241)}]);