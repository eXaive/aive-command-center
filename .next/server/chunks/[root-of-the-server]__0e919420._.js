module.exports=[70406,(e,t,i)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},94543,(e,t,i)=>{t.exports=e.x("pdfkit",()=>require("pdfkit"))},46810,(e,t,i)=>{t.exports=e.x("svg-to-pdfkit",()=>require("svg-to-pdfkit"))},2157,(e,t,i)=>{t.exports=e.x("node:fs",()=>require("node:fs"))},50227,(e,t,i)=>{t.exports=e.x("node:path",()=>require("node:path"))},52172,e=>{"use strict";var t=e.i(26747),i=e.i(90406),o=e.i(44898),a=e.i(62950),r=e.i(2157),n=e.i(50227),s=e.i(94543),l=e.i(46810);let p=(e,t=0)=>"number"==typeof e&&isFinite(e)?e:t;async function d(e,t){let i,o,a=(e.query.asset||"GOLD").toString().toUpperCase(),d=(e.query.slug||"geopolitics").toString(),c=(i=e.headers["x-forwarded-proto"]||"http",o=e.headers.host||"localhost:3000",`${i}://${o}`);t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition",`inline; filename="Topic_Brief_${d}_${a}.pdf"`),t.setHeader("Cache-Control","no-store, no-cache, must-revalidate, max-age=0");let f=0,u=0,h=0,m=0;try{let e=await fetch(`${c}/api/heat`,{cache:"no-store"}),t=await e.json(),i=t?.metrics||t?.scores,o=i?.[d];if("number"==typeof o)f=Math.max(-1,Math.min(1,o)),u=Math.abs(o);else if(o&&"object"==typeof o){let e;f=Math.max(-1,Math.min(1,p(o.polarity,0))),e=Math.abs(p(o.weight,Math.abs(f))),u=Math.max(0,Math.min(1,e))}}catch{}try{let e=await fetch(`${c}/api/news?asset=${encodeURIComponent(a)}&q=${encodeURIComponent(d)}`,{cache:"no-store"}),t=await e.json(),i=(Array.isArray(t?.items)?t.items:[]).map(e=>p(e?.sentiment,0));h=(m=i.length)?i.reduce((e,t)=>e+t,0)/m:0}catch{}let v=f>.4?"constructive":f>.1?"modestly supportive":f<-.4?"adverse":f<-.1?"moderately adverse":"balanced",x=h>.15?"positive":h<-.15?"negative":"mixed",w=new s.default({size:"LETTER",margins:{top:54,bottom:54,left:64,right:54}});w.pipe(t);try{let e=n.default.join(process.cwd(),"public","crowned_x.svg"),t=r.default.readFileSync(e,"utf8"),{width:i}=w.page;(0,l.default)(w,t,i-80-60,40,{width:80,preserveAspectRatio:"xMidYMid meet"})}catch{}let g=d.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());w.fontSize(24).fillColor("#0f172a").text(`Topic Brief — ${g} (${a})`,64,54),w.moveDown(.3).fontSize(10).fillColor("#475569").text(`Prepared by BigDataEtc \xd7 eX  •  ${new Date().toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"})}`),w.moveDown(.5).fontSize(11).fillColor("#1f2937").text("Monitor Everything that affects Finance."),w.moveTo(64,w.y+8).lineTo(w.page.width-54,w.y+8).strokeColor("#e5e7eb").lineWidth(1).stroke(),w.moveDown(1.2),w.fontSize(12).fillColor("#111827").text("Summary"),w.moveDown(.4).fontSize(11).fillColor("#334155").text(`${g} shows a ${v} impulse for ${a}. Headline tone within this topic appears ${x}. The values below are computed from live dashboard heat and filtered headlines.`),w.moveDown(.9).fontSize(12).fillColor("#111827").text("Topic Metrics"),w.moveDown(.3).fontSize(11).fillColor("#111827").text(`• Polarity: ${(f>=0?"+":"")+f.toFixed(2)}`).text(`• Strength: ${u.toFixed(2)}`).text(`• News Tone (avg): ${(h>=0?"+":"")+h.toFixed(2)} (${m} headlines)`),w.moveDown(.9).fontSize(12).fillColor("#111827").text("Narrative"),w.moveDown(.3).fontSize(11).fillColor("#334155").text(`The ${g.toLowerCase()} vector is currently ${v}. We expect developments in this area to continue influencing ${a} through sentiment and flows.`),w.moveDown(1).fontSize(9).fillColor("#6b7280").text("Disclaimer: This brief is for informational purposes only and does not constitute financial advice. Views reflect data available at time of publication and may change without notice."),w.moveDown(.8).fontSize(9).fillColor("#64748b").text("A publication of BigDataEtc × eX — Monitor Everything that affects Finance."),w.end()}e.s(["default",()=>d],92260);var c=e.i(92260),f=e.i(7031),u=e.i(81927),h=e.i(46432);let m=(0,a.hoist)(c,"default"),v=(0,a.hoist)(c,"config"),x=new o.PagesAPIRouteModule({definition:{kind:i.RouteKind.PAGES_API,page:"/api/brief.topic",pathname:"/api/brief.topic",bundlePath:"",filename:""},userland:c,distDir:".next",relativeProjectDir:""});async function w(e,i,o){x.isDev&&(0,h.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/brief.topic";a=a.replace(/\/index$/,"")||"/";let r=await x.prepare(e,i,{srcPage:a});if(!r){i.statusCode=400,i.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve());return}let{query:n,params:s,prerenderManifest:l,routerServerContext:p}=r;try{let t=e.method||"GET",o=(0,f.getTracer)(),r=o.getActiveScopeSpan(),d=x.instrumentationOnRequestError.bind(x),c=async r=>x.render(e,i,{query:{...n,...s},params:s,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:l.preview,propagateError:!1,dev:x.isDev,page:"/api/brief.topic",internalRevalidate:null==p?void 0:p.revalidate,onError:(...t)=>d(e,...t)}).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":i.statusCode,"next.rsc":!1});let e=o.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${t} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${t} ${a}`)});r?await c(r):await o.withPropagatedContext(e.headers,()=>o.trace(u.BaseServerSpan.handleRequest,{spanName:`${t} ${a}`,kind:f.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},c))}catch(e){if(x.isDev)throw e;(0,t.sendError)(i,500,"Internal Server Error")}finally{null==o.waitUntil||o.waitUntil.call(o,Promise.resolve())}}e.s(["config",0,v,"default",0,m,"handler",()=>w],52172)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0e919420._.js.map