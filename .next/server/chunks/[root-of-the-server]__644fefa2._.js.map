{"version":3,"sources":["turbopack:///[project]/node_modules/next/dist/esm/build/templates/pages-api.js","turbopack:///[project]/pages/api/topic/[slug].ts"],"sourcesContent":["import { sendError } from \"next/dist/esm/server/api-utils\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { PagesAPIRouteModule } from \"next/dist/esm/server/route-modules/pages-api/module.compiled\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { addRequestMeta } from \"next/dist/esm/server/request-meta\";\n// Re-export the handler (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export config.\nexport const config = hoist(userland, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new PagesAPIRouteModule({\n    definition: {\n        kind: RouteKind.PAGES_API,\n        page: \"/api/topic/[slug]\",\n        pathname: \"/api/topic/[slug]\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland,\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || ''\n});\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/topic/[slug]\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    }\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = getTracer();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: process.env.__NEXT_ALLOWED_REVALIDATE_HEADERS,\n                multiZoneDraftMode: Boolean(process.env.__NEXT_MULTI_ZONE_DRAFT_MODE),\n                trustHostHeader: process.env.__NEXT_TRUST_HOST_HEADER,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/topic/[slug]\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        sendError(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n","// pages/api/topic/[slug].ts\r\nimport type { NextApiRequest, NextApiResponse } from \"next\";\r\nimport Parser from \"rss-parser\";\r\n\r\n/** Topic item returned to the client */\r\ntype Item = {\r\n  title: string;\r\n  link?: string;\r\n  pubDate?: string;\r\n  source?: string;\r\n  image?: string | null;\r\n};\r\n\r\nconst parser = new Parser({\r\n  headers: { \"user-agent\": \"Mozilla/5.0 (TopicFeed/1.0; +https://example.com)\" },\r\n});\r\n\r\n/* ------------------------------------------------------------------ */\r\n/* Curated feeds by topic (extendable)                                 */\r\n/* ------------------------------------------------------------------ */\r\nconst TOPIC_FEEDS: Record<string, { name: string; urls: string[] }> = {\r\n  energy: {\r\n    name: \"Energy\",\r\n    urls: [\r\n      \"https://www.oilprice.com/rss/main\",\r\n      \"https://feeds.reuters.com/reuters/commoditiesNews\",\r\n      \"https://www.eia.gov/rss/todayinenergy.xml\",\r\n    ],\r\n  },\r\n  geopolitics: {\r\n    name: \"Geopolitics\",\r\n    urls: [\r\n      \"https://feeds.reuters.com/Reuters/worldNews\",\r\n      \"https://feeds.bbci.co.uk/news/world/rss.xml\",\r\n      \"https://www.aljazeera.com/xml/rss/all.xml\",\r\n    ],\r\n  },\r\n  cpi: {\r\n    name: \"CPI\",\r\n    urls: [\r\n      \"https://www.bls.gov/feeds/news_release/cpi.rss\",\r\n      \"https://feeds.reuters.com/reuters/businessNews\",\r\n    ],\r\n  },\r\n  inflation: {\r\n    name: \"Inflation\",\r\n    urls: [\r\n      \"https://feeds.reuters.com/reuters/businessNews\",\r\n      \"https://www.imf.org/en/News/rss\",\r\n    ],\r\n  },\r\n  rates: {\r\n    name: \"Rates (CBs)\",\r\n    urls: [\r\n      \"https://www.federalreserve.gov/feeds/press_all.xml\",\r\n      \"https://www.ecb.europa.eu/rss/press.html\",\r\n      \"https://www.bankofengland.co.uk/news/news.xml\",\r\n      \"https://www.bis.org/press_rss.xml\",\r\n    ],\r\n  },\r\n  dxy: {\r\n    name: \"DXY / FX\",\r\n    urls: [\r\n      \"https://feeds.reuters.com/news/forexNews\",\r\n      \"https://feeds.bbci.co.uk/news/business/rss.xml\",\r\n    ],\r\n  },\r\n  \"btc-flows\": {\r\n    name: \"BTC Flows\",\r\n    urls: [\r\n      \"https://www.coindesk.com/arc/outboundfeeds/rss/?outputType=xml\",\r\n      \"https://cointelegraph.com/rss\",\r\n    ],\r\n  },\r\n  housing: {\r\n    name: \"Housing\",\r\n    urls: [\r\n      \"https://www.redfin.com/blog/feed/\",\r\n      \"https://www.zillow.com/research/feed/\",\r\n      \"https://www.realtor.com/research/feed/\",\r\n    ],\r\n  },\r\n  \"tech-ai\": {\r\n    name: \"Technology & AI\",\r\n    urls: [\r\n      \"https://techcrunch.com/feed/\",\r\n      \"https://www.cnbc.com/id/19854910/device/rss/rss.html\",\r\n      \"https://www.ft.com/technology?format=rss\",\r\n    ],\r\n  },\r\n  oil: {\r\n    name: \"Oil\",\r\n    urls: [\r\n      \"https://www.oilprice.com/rss/main\",\r\n      \"https://feeds.reuters.com/reuters/commoditiesNews\",\r\n    ],\r\n  },\r\n  regulation: {\r\n    name: \"Regulation\",\r\n    urls: [\r\n      \"https://feeds.reuters.com/reuters/USdomesticNews\",\r\n      \"https://www.sec.gov/news/pressreleases.rss\",\r\n    ],\r\n  },\r\n  \"supply-chains\": {\r\n    name: \"Supply Chains\",\r\n    urls: [\r\n      \"https://www.wsj.com/news/types/logistics-report?mod=rss\",\r\n      \"https://www.reuters.com/subjects/supply-chain/rss\",\r\n    ],\r\n  },\r\n  credit: {\r\n    name: \"Credit\",\r\n    urls: [\r\n      \"https://www.reuters.com/finance/deals/rss\",\r\n      \"https://www.bloomberg.com/politics/feeds/site.xml\",\r\n    ],\r\n  },\r\n  liquidity: {\r\n    name: \"Liquidity\",\r\n    urls: [\r\n      \"https://seekingalpha.com/market_currents.xml\",\r\n      \"https://www.federalreserve.gov/feeds/press_all.xml\",\r\n    ],\r\n  },\r\n  gdp: {\r\n    name: \"Growth / GDP\",\r\n    urls: [\r\n      \"https://www.bea.gov/rss.xml\",\r\n      \"https://www.oecd.org/rssfeeds/publicationsandproducts.xml\",\r\n    ],\r\n  },\r\n  demographics: {\r\n    name: \"Demographics\",\r\n    urls: [\r\n      \"https://www.census.gov/newsroom/census-rss.xml\",\r\n      \"https://www.pewresearch.org/feed/\",\r\n    ],\r\n  },\r\n  elections: {\r\n    name: \"Elections\",\r\n    urls: [\r\n      \"https://feeds.reuters.com/Reuters/PoliticsNews\",\r\n      \"https://feeds.bbci.co.uk/news/politics/rss.xml\",\r\n    ],\r\n  },\r\n  climate: {\r\n    name: \"Climate\",\r\n    urls: [\r\n      \"https://climate.nasa.gov/news/rss.xml\",\r\n      \"https://www.noaa.gov/rss\",\r\n      \"https://www.bloomberg.com/feeds/bgreen.xml\",\r\n    ],\r\n  },\r\n  sentiment: {\r\n    name: \"Sentiment\",\r\n    urls: [\r\n      \"https://finance.yahoo.com/news/rssindex\",\r\n      \"https://www.aaii.com/sentimentsurvey/rss\",\r\n    ],\r\n  },\r\n  payrolls: {\r\n    name: \"Payrolls\",\r\n    urls: [\r\n      \"https://www.bls.gov/feeds/news_release/empsit.rss\",\r\n      \"https://feeds.reuters.com/reuters/businessNews\",\r\n    ],\r\n  },\r\n  \"news-tone\": {\r\n    name: \"News Tone\",\r\n    urls: [\r\n      \"https://feeds.a.dj.com/rss/RSSMarketsMain.xml\",\r\n      \"https://feeds.reuters.com/reuters/businessNews\",\r\n    ],\r\n  },\r\n};\r\n\r\n/* ------------------------------------------------------------------ */\r\n/* Utilities                                                           */\r\n/* ------------------------------------------------------------------ */\r\n\r\nasync function fetchWithTimeout(url: string, ms = 6000): Promise<Response> {\r\n  const ctrl = new AbortController();\r\n  const id = setTimeout(() => ctrl.abort(), ms);\r\n  try {\r\n    return await fetch(url, {\r\n      signal: ctrl.signal,\r\n      headers: { \"user-agent\": \"Mozilla/5.0 (TopicFeed/1.0; +https://example.com)\" },\r\n    });\r\n  } finally {\r\n    clearTimeout(id);\r\n  }\r\n}\r\n\r\n/** Try multiple meta patterns for images; prefer non-SVG, non-sprite-like URLs */\r\nfunction extractBestImageFromHtml(html: string, baseUrl: string): string | null {\r\n  const pick = (...regexes: RegExp[]) => {\r\n    for (const re of regexes) {\r\n      const m = html.match(re);\r\n      if (m && m[1]) {\r\n        const u = absolutize(m[1], baseUrl);\r\n        if (!/sprite|logo|placeholder/i.test(u) && !u.endsWith(\".svg\")) return u;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // Common OG/Twitter patterns\r\n  const candidate =\r\n    pick(\r\n      /<meta[^>]+property=[\"']og:image:secure_url[\"'][^>]+content=[\"']([^\"']+)[\"']/i,\r\n      /<meta[^>]+property=[\"']og:image[\"'][^>]+content=[\"']([^\"']+)[\"']/i,\r\n      /<meta[^>]+name=[\"']twitter:image[\"'][^>]+content=[\"']([^\"']+)[\"']/i,\r\n      /<meta[^>]+itemprop=[\"']image[\"'][^>]+content=[\"']([^\"']+)[\"']/i,\r\n      /<link[^>]+rel=[\"']image_src[\"'][^>]+href=[\"']([^\"']+)[\"']/i\r\n    ) || null;\r\n\r\n  return candidate;\r\n}\r\n\r\nfunction absolutize(url: string, baseUrl: string): string {\r\n  try {\r\n    return new URL(url, baseUrl).toString();\r\n  } catch {\r\n    return url;\r\n  }\r\n}\r\n\r\nfunction toFavicon(baseUrl: string): string | null {\r\n  try {\r\n    const u = new URL(baseUrl);\r\n    return `${u.origin}/favicon.ico`;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/** Normalize an RSS item into our Item shape; pick enclosure/media images if present */\r\nfunction normalizeRssItem(it: any, source: string): Item {\r\n  let img: string | null = null;\r\n\r\n  // Check enclosure/media fields first\r\n  if (it.enclosure?.url) img = it.enclosure.url;\r\n  if (!img && Array.isArray(it.enclosure)) img = it.enclosure[0]?.url;\r\n  if (!img && it[\"media:content\"]?.url) img = it[\"media:content\"].url as string;\r\n  if (!img && it[\"media:thumbnail\"]?.url) img = it[\"media:thumbnail\"].url as string;\r\n\r\n  return {\r\n    title: String(it.title || \"\"),\r\n    link: it.link,\r\n    pubDate: it.pubDate,\r\n    source,\r\n    image: img || null,\r\n  };\r\n}\r\n\r\n/** Build a merged, sorted list for the topic; fetch OG images when needed */\r\nasync function buildItemsForTopic(urls: string[]): Promise<Item[]> {\r\n  const lists = await Promise.allSettled(\r\n    urls.map(async (url) => {\r\n      const feed = await parser.parseURL(url);\r\n      const source =\r\n        (feed.title || \"\")\r\n          .replace(/RSS|Feed/gi, \"\")\r\n          .trim() || new URL(url).host;\r\n\r\n      const items: Item[] = (feed.items || []).map((it: any) => normalizeRssItem(it, source));\r\n      return items;\r\n    })\r\n  );\r\n\r\n  const merged = lists\r\n    .flatMap((r) => (r.status === \"fulfilled\" ? r.value : []))\r\n    .filter((i) => i?.title)\r\n    .sort((a, b) => {\r\n      const da = a.pubDate ? Date.parse(a.pubDate) : 0;\r\n      const db = b.pubDate ? Date.parse(b.pubDate) : 0;\r\n      return db - da;\r\n    });\r\n\r\n  // Try to fill missing thumbnails (limit HTML fetches to keep snappy)\r\n  const MAX_FETCH_THUMBS = 24;\r\n  const toFill = merged.filter((i) => !i.image && i.link).slice(0, MAX_FETCH_THUMBS);\r\n\r\n  await Promise.allSettled(\r\n    toFill.map(async (it) => {\r\n      if (!it.link) return;\r\n      try {\r\n        const resp = await fetchWithTimeout(it.link, 6500);\r\n        if (!resp.ok) {\r\n          it.image = toFavicon(it.link) || \"/crowned_x.svg\";\r\n          return;\r\n        }\r\n        const html = await resp.text();\r\n        const og = extractBestImageFromHtml(html, it.link);\r\n        it.image = og || toFavicon(it.link) || \"/crowned_x.svg\";\r\n      } catch {\r\n        it.image = toFavicon(it.link) || \"/crowned_x.svg\";\r\n      }\r\n    })\r\n  );\r\n\r\n  // Final fallback for any still-missing images\r\n  for (const it of merged) {\r\n    if (!it.image) {\r\n      it.image = it.link ? toFavicon(it.link) || \"/crowned_x.svg\" : \"/crowned_x.svg\";\r\n    }\r\n  }\r\n\r\n  return merged.slice(0, 60);\r\n}\r\n\r\n/* ------------------------------------------------------------------ */\r\n/* Handler                                                             */\r\n/* ------------------------------------------------------------------ */\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n  const slug = String(req.query.slug || \"\").toLowerCase();\r\n  const topic = TOPIC_FEEDS[slug];\r\n  if (!topic) {\r\n    res.status(404).json({ error: \"Unknown topic\", slug });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const items = await buildItemsForTopic(topic.urls);\r\n    res.status(200).json({\r\n      topic: topic.name,\r\n      slug,\r\n      count: items.length,\r\n      items,\r\n    });\r\n  } catch (e: any) {\r\n    res.status(500).json({ error: e?.message || \"Failed to build topic feed\", slug });\r\n  }\r\n}\r\n"],"names":[],"mappings":"2OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCUA,IAAM,EAAS,GAXf,AAWmB,CAXnB,EAAA,CAAA,CAAA,MAAA,EAWmB,OAAM,CAAC,CACxB,QAAS,CAAE,aAAc,mDAAoD,CAC/E,GAKM,EAAgE,CACpE,OAAQ,CACN,KAAM,SACN,KAAM,CACJ,oCACA,oDACA,4CACD,AACH,EACA,YAAa,CACX,KAAM,cACN,KAAM,CACJ,8CACA,8CACA,4CACD,AACH,EACA,IAAK,CACH,KAAM,MACN,KAAM,CACJ,iDACA,iDAEJ,AADG,EAEH,UAAW,CACT,KAAM,YACN,KAAM,CACJ,iDACA,kCACD,AACH,EACA,MAAO,CACL,KAAM,cACN,KAAM,CACJ,qDACA,2CACA,gDACA,oCACD,AACH,EACA,IAAK,CACH,KAAM,WACN,KAAM,CACJ,2CACA,iDACD,AACH,EACA,YAAa,CACX,KAAM,YACN,KAAM,CACJ,iEACA,gCACD,AACH,EACA,QAAS,CACP,KAAM,UACN,KAAM,CACJ,oCACA,wCACA,yCACD,AACH,EACA,UAAW,CACT,KAAM,kBACN,KAAM,CACJ,+BACA,uDACA,2CACD,AACH,EACA,IAAK,CACH,KAAM,MACN,KAAM,CACJ,oCACA,oDACD,AACH,EACA,WAAY,CACV,KAAM,aACN,KAAM,CACJ,mDACA,6CAEJ,AADG,EAEH,gBAAiB,CACf,KAAM,gBACN,KAAM,CACJ,0DACA,oDACD,AACH,EACA,OAAQ,CACN,KAAM,SACN,KAAM,CACJ,4CACA,oDACD,AACH,EACA,UAAW,CACT,KAAM,YACN,KAAM,CACJ,+CACA,qDACD,AACH,EACA,IAAK,CACH,KAAM,eACN,KAAM,CACJ,8BACA,4DACD,AACH,EACA,aAAc,CACZ,KAAM,eACN,KAAM,CACJ,iDACA,oCAEJ,AADG,EAEH,UAAW,CACT,KAAM,YACN,KAAM,CACJ,iDACA,iDACD,AACH,EACA,QAAS,CACP,KAAM,UACN,KAAM,CACJ,wCACA,2BACA,6CAEJ,AADG,EAEH,UAAW,CACT,KAAM,YACN,KAAM,CACJ,0CACA,2CACD,AACH,EACA,SAAU,CACR,KAAM,WACN,KAAM,CACJ,oDACA,iDACD,AACH,EACA,YAAa,CACX,KAAM,YACN,KAAM,CACJ,gDACA,iDACD,AACH,CACF,EAMA,eAAe,EAAiB,CAAW,CAAE,EAAK,GAAI,EACpD,IAAM,EAAO,IAAI,gBACX,EAAK,WAAW,IAAM,EAAK,KAAK,GAAI,GAC1C,GAAI,CACF,OAAO,MAAM,MAAM,EAAK,CACtB,OAAQ,EAAK,MAAM,CACnB,QAAS,CAAE,aAAc,mDAAoD,CAC/E,EACF,QAAU,CACR,aAAa,EACf,CACF,CAoCA,SAAS,EAAU,CAAe,EAChC,GAAI,CACF,IAAM,EAAI,IAAI,IAAI,GAClB,MAAO,CAAA,EAAG,EAAE,MAAM,CAAC,YAAY,CACjC,AADkC,CAChC,KAAM,CACN,OAAO,IACT,CACF,CAsBA,eAAe,EAAmB,CAAc,EAc9C,IAAM,EAAS,CAbD,MAAM,QAAQ,UAAU,CACpC,EAAK,GAAG,CAAC,MAAO,IACd,IAAM,EAAO,MAAM,EAAO,QAAQ,CAAC,GAC7B,EACJ,CAAC,EAAK,KAAK,EAAI,EAAA,CAAE,CACd,OAAO,CAAC,aAAc,IACtB,IAAI,IAAM,IAAI,IAAI,GAAK,IAAI,CAGhC,MADsB,AAAC,CAChB,EADqB,KAAK,EAAI,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,KAAY,YA3B1D,EAAqB,KAGrB,EAAG,SAAS,EAAE,MAAK,EAAM,EAAG,SAAS,CAAC,GAAA,AAAG,EACzC,CAAC,GAAO,MAAM,OAAO,CAAC,EAAG,SAAS,IAAG,EAAM,EAAG,SAAS,CAAC,EAAE,EAAE,GAAA,EAC5D,CAAC,GAAO,CAAE,CAAC,gBAAgB,EAAE,MAAK,EAAM,CAAE,CAAC,gBAAgB,CAAC,GAAG,AAAH,EAC5D,CAAC,GAAO,AAqBmE,CArBjE,CAAC,kBAAkB,EAAE,MAAK,EAAM,CAAE,CAAC,kBAAkB,CAAC,GAAA,AAAG,EAEhE,CACL,MAAO,OAAO,EAAG,KAAK,EAAI,IAC1B,KAAM,EAAG,IAAI,CACb,QAAS,EAAG,OAAO,CACnB,OAeiF,EAdjF,MAAO,GAAO,IAChB,GAeE,GAAA,EAIC,OAAO,CAAE,AAAD,GAAqB,cAAb,EAAE,MAAM,CAAmB,EAAE,KAAK,CAAG,EAAE,EACvD,MAAM,CAAC,AAAC,GAAM,GAAG,OACjB,IAAI,CAAC,CAAC,EAAG,KACR,IAAM,EAAK,EAAE,OAAO,CAAG,KAAK,KAAK,CAAC,EAAE,OAAO,EAAI,EAE/C,MAAO,CADI,EAAE,OAAO,CAAG,KAAK,KAAK,CAAC,EAAE,OAAO,GAAI,EACnC,CACd,GAII,EAAS,EAAO,MAAM,CAAC,AAAC,GAAM,CAAC,EAAE,KAAK,EAAI,EAAE,IAAI,EAAE,KAAK,CAAC,EADrC,CACwC,GAqBjE,IAAK,IAAM,KAnBX,MAAM,QAAQ,UAAU,CACtB,EAAO,GAAG,CAAC,MAAO,IAChB,GAAK,CAAD,CAAI,IAAI,CACZ,CADc,EACV,OA5FsC,EA6FxC,IAAM,CA7FiD,CA6F1C,MAAM,EAAiB,EAAG,IAAI,CAAE,MAC7C,GAAI,CAAC,EAAK,EAAE,CAAE,CACZ,EAAG,KAAK,CAAG,EAAU,EAAG,IAAI,GAAK,iBACjC,MACF,CAEA,IAAM,GAnGoB,EAkGb,AACF,EAnG2B,IAkGnB,EAAK,IAAI,KACc,EAAG,IAAI,CArFrD,AAbW,CAkG6B,CAlG5B,GAAG,KACf,IAAK,IAAM,KAAM,EAAS,CACxB,IAAM,EAAI,EAAK,KAAK,CAAC,GACrB,GAAI,GAAK,CAAC,CAAC,EAAE,CAAE,CACb,IAAM,EAoBd,AApBkB,SAoBT,AAAW,CAAW,CAAE,CAAe,EAC9C,GAAI,CACF,OAAO,IAAI,IAAI,EAAK,GAAS,QAAQ,EACvC,CAAE,KAAM,CACN,OAAO,CACT,CACF,EA1B6B,CAAC,CAAC,EAAE,CAAE,GAC3B,GAAI,CAAC,2BAA2B,IAAI,CAAC,IAAM,CAAC,EAAE,QAAQ,CAAC,QAAS,OAAO,CACzE,CACF,CACA,OAAO,KACT,EAKI,+EACA,oEACA,qEACA,iEACA,+DACG,MAgFD,EAAG,KAAK,CAAG,GAAM,EAAU,EAAG,IAAI,GAAK,gBACzC,CAAE,KAAM,CACN,EAAG,KAAK,CAAG,EAAU,EAAG,IAAI,GAAK,gBACnC,CACF,IAIe,GACX,AAAC,EAAG,EADe,GACV,EAAE,CACb,EAAG,KAAK,CAAG,EAAG,IAAI,EAAG,EAAU,EAAG,IAAI,GAAK,gBAAmB,EAIlE,CAJkE,MAI3D,EAAO,KAAK,CAAC,EAAG,GACzB,CAKe,eAAe,EAAQ,CAAmB,CAAE,CAAoB,EAC7E,IAAM,EAAO,OAAO,EAAI,KAAK,CAAC,IAAI,EAAI,IAAI,WAAW,GAC/C,EAAQ,CAAW,CAAC,EAAK,CAC/B,GAAI,CAAC,EAAO,YACV,EAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAE,MAAO,qBAAiB,CAAK,GAItD,GAAI,CACF,IAAM,EAAQ,MAAM,EAAmB,EAAM,IAAI,EACjD,EAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CACnB,MAAO,EAAM,IAAI,MACjB,EACA,MAAO,EAAM,MAAM,OACnB,CACF,EACF,CAAE,MAAO,EAAQ,CACf,EAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAE,MAAO,GAAG,SAAW,kCAA8B,CAAK,EACjF,CACF,8BDzUA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,aAEe,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,WAElB,EAAS,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,UAEhC,EAAc,IAAI,EAAA,mBAAmB,CAAC,CACxC,WAAY,CACR,KAAM,EAAA,SAAS,CAAC,SAAS,CACzB,KAAM,oBACN,SAAU,oBAEV,WAAY,GACZ,SAAU,EACd,EACA,SAAA,EACA,QAAS,CAAA,OACT,IADiD,eACc,CAA3C,CACxB,GACO,eAAe,EAAQ,CAAG,CAAE,CAAG,CAAE,CAAG,EACnC,EAAY,KAAK,EAAE,AACnB,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,+BAAgC,QAAQ,MAAM,CAAC,MAAM,IAE7E,IAAI,EAAU,oBAKV,EAAU,EAAQ,OAAO,CAAC,WAAY,KAAO,IAEjD,IAAM,EAAgB,MAAM,EAAY,OAAO,CAAC,EAAK,EAAK,SACtD,CACJ,GACA,GAAI,CAAC,EAAe,CAChB,EAAI,UAAU,CAAG,IACjB,EAAI,GAAG,CAAC,eACS,MAAjB,CAAwB,CAApB,IAAyB,KAAhB,EAAoB,EAAI,SAAS,CAAC,IAAI,CAAC,EAAK,QAAQ,OAAO,IACxE,MACJ,CACA,GAAM,OAAE,CAAK,QAAE,CAAM,CAAE,mBAAiB,qBAAE,CAAmB,CAAE,CAAG,EAClE,GAAI,CACA,IAAM,EAAS,EAAI,MAAM,EAAI,MACvB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAa,EAAO,kBAAkB,GACtC,EAAiB,EAAY,6BAA6B,CAAC,IAAI,CAAC,GAChE,EAAoB,MAAO,GAAO,EAAY,MAAM,CAAC,EAAK,EAAK,CAC7D,MAAO,CACH,GAAG,CAAK,CACR,GAAG,CACP,AADa,SAEb,EACA,2BAA2B,CAAA,EAAA,CAC3B,mBAAoB,CAAA,EACpB,eAAe,CAAA,CAAA,EAGf,aAAc,EAAkB,OAAO,CACvC,gBAAgB,EAChB,IAAK,EAAY,KAAK,CACtB,KAAM,oBACN,mBAA2C,MAAvB,EAA8B,KAAK,EAAI,EAAoB,UAAU,CACzF,QAAS,CAAC,GAAG,IAAO,EAAe,KAAQ,EAC/C,GAAG,OAAO,CAAC,KACP,GAAI,CAAC,EAAM,OACX,EAAK,aAAa,CAAC,CACf,mBAAoB,EAAI,UAAU,CAClC,YAAY,CAChB,GACA,IAAM,EAAqB,EAAO,qBAAqB,GAEvD,GAAI,CAAC,EACD,OAEJ,GAAI,EAAmB,GAAG,CAAC,EAHF,kBAGwB,EAAA,cAAc,CAAC,aAAa,CAAE,YAC3E,QAAQ,IAAI,CAAC,CAAC,2BAA2B,EAAE,EAAmB,GAAG,CAAC,kBAAkB,qEAAqE,CAAC,EAG9J,IAAM,EAAQ,EAAmB,GAAG,CAAC,cACrC,GAAI,EAAO,CACP,IAAM,EAAO,CAAA,EAAG,EAAO,CAAC,EAAE,EAAA,CAAO,CACjC,EAAK,aAAa,CAAC,CACf,aAAc,EACd,aAAc,EACd,iBAAkB,CACtB,GACA,EAAK,UAAU,CAAC,EACpB,MACI,CADG,CACE,UAAU,CAAC,CAAA,EAAG,EAAO,CAAC,EAAE,EAAA,CAAS,CAE9C,GAGA,EACA,MAAM,EAAkB,EADZ,CAGZ,MAAM,EAAO,qBAAqB,CAAC,EAAI,OAAO,CAAE,IAAI,EAAO,KAAK,CAAC,EAAA,cAAc,CAAC,aAAa,CAAE,CACvF,SAAU,CAAA,EAAG,EAAO,CAAC,EAAE,EAAA,CAAS,CAChC,KAAM,EAAA,QAAQ,CAAC,MAAM,CACrB,WAAY,CACR,cAAe,EACf,cAAe,EAAI,GAAG,AAC1B,CACJ,EAAG,GAEf,CAAE,MAAO,EAAK,CAEV,GAAI,EAAY,KAAK,CACjB,CADmB,KACb,EAIV,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAK,IAAK,wBACxB,QAAS,CAIY,MAAjB,CAAwB,CAApB,IAAyB,KAAhB,EAAoB,EAAI,SAAS,CAAC,IAAI,CAAC,EAAK,QAAQ,OAAO,GAC5E,CACJ,EAEA,qCAAqC","ignoreList":[0]}